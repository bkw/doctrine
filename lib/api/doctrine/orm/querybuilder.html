<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta name="generator" content="PHPDoctor 2RC4 (http://phpdoctor.sourceforge.net/)">
<meta name="when" content="Wed, 12 May 2010 22:47:37 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>QueryBuilder (Doctrine)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>Doctrine</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../doctrine/orm/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../doctrine/orm/package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../doctrine/orm/querybuilder.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">Doctrine\ORM\QueryBuilder</div>
<div class="location">/Doctrine/ORM/QueryBuilder.php at line 33</div>

<h1>Class QueryBuilder</h1>

<pre class="tree"><strong>QueryBuilder</strong><br /></pre>

<hr>

<p class="signature">public  class <strong>QueryBuilder</strong></p>

<div class="comment" id="overview_description"><p>This class is responsible for building DQL query strings via an object oriented
PHP interface.</p></div>

<dl>
<dt>Since:</dt>
<dd>2.0</dd>
<dt>Author:</dt>
<dd>Guilherme Blanco <guilhermeblanco@hotmail.com></dd>
<dd>Jonathan Wage <jonwage@gmail.com></dd>
<dd>Roman Borschel <roman@code-factory.org></dd>
</dl>
<hr>

<table id="summary_field">
<tr><th colspan="2">Field Summary</th></tr>
<tr>
<td class="type">final  int</td>
<td class="description"><p class="name"><a href="#DELETE">DELETE</a></p></td>
</tr>
<tr>
<td class="type">final  int</td>
<td class="description"><p class="name"><a href="#SELECT">$SELECT</a></p></td>
</tr>
<tr>
<td class="type">final  int</td>
<td class="description"><p class="name"><a href="#STATE_CLEAN">STATE_CLEAN</a></p></td>
</tr>
<tr>
<td class="type">final  int</td>
<td class="description"><p class="name"><a href="#STATE_DIRTY">$STATE_DIRTY</a></p><p class="description">The builder states.</p></td>
</tr>
<tr>
<td class="type">final  int</td>
<td class="description"><p class="name"><a href="#UPDATE">UPDATE</a></p></td>
</tr>
</table>

<table id="summary_constr">
<tr><th colspan="2">Constructor Summary</th></tr>
<tr>
<td class="description"><p class="name"><a href="#QueryBuilder()">QueryBuilder</a>(<a href="../../doctrine/orm/entitymanager.html">EntityManager</a> em)</p><p class="description">Initializes a new QueryBuilder that uses the given EntityManager.</p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#add()">add</a>(string dqlPartName, string dqlPart, string append)</p><p class="description">Either appends to or replaces a single, generic query part.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#addGroupBy()">addGroupBy</a>(string groupBy)</p><p class="description">Adds a grouping expression to the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#addOrderBy()">addOrderBy</a>(string sort, string order)</p><p class="description">Adds an ordering to the query results.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#addSelect()">addSelect</a>(mixed select)</p><p class="description">Adds an item that is to be returned in the query result.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#andHaving()">andHaving</a>(mixed having)</p><p class="description">Adds a restriction over the groups of the query, forming a logical
conjunction with any existing having restrictions.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#andWhere()">andWhere</a>(mixed where)</p><p class="description">Adds one or more restrictions to the query results, forming a logical
conjunction with any previously specified restrictions.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#delete()">delete</a>(string delete, string alias)</p><p class="description">Turns the query being built into a bulk delete query that ranges over
a certain entity type.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/query/expr.html">Expr</a></td>
<td class="description"><p class="name"><a href="#expr()">expr</a>()</p><p class="description">Gets an ExpressionBuilder used for object-oriented construction of query expressions.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#from()">from</a>(string from, string alias)</p><p class="description">Create and add a query root corresponding to the entity identified by the given alias,
forming a cartesian product with any existing query roots.
</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getDQL()">getDQL</a>()</p><p class="description">Get the complete DQL string formed by the current specifications of this QueryBuilder.
</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getDQLPart()">getDQLPart</a>(string queryPartName)</p><p class="description">Get a query part by its name.</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getDQLParts()">getDQLParts</a>()</p><p class="description">Get all query parts.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/entitymanager.html">EntityManager</a></td>
<td class="description"><p class="name"><a href="#getEntityManager()">getEntityManager</a>()</p><p class="description">Get the associated EntityManager for this query builder.</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#getFirstResult()">getFirstResult</a>()</p><p class="description">Gets the position of the first result the query object was set to retrieve (the "offset").
</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#getMaxResults()">getMaxResults</a>()</p><p class="description">Gets the maximum number of results the query object was set to retrieve (the "limit").
</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getParameter()">getParameter</a>(mixed key)</p><p class="description">Gets a (previously set) query parameter of the query being constructed.</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getParameters()">getParameters</a>()</p><p class="description">Gets all defined query parameters for the query being constructed.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/query.html">Query</a></td>
<td class="description"><p class="name"><a href="#getQuery()">getQuery</a>()</p><p class="description">Constructs a Query instance from the current specifications of the builder.
</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getRootAlias()">getRootAlias</a>()</p><p class="description">Gets the root alias of the query. </p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#getState()">getState</a>()</p><p class="description">Get the state of this query builder instance.</p></td>
</tr>
<tr>
<td class="type"> integer</td>
<td class="description"><p class="name"><a href="#getType()">getType</a>()</p><p class="description">Get the type of the currently built query.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#groupBy()">groupBy</a>(string groupBy)</p><p class="description">Specifies a grouping over the results of the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#having()">having</a>(mixed having)</p><p class="description">Specifies a restriction over the groups of the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#innerJoin()">innerJoin</a>(string join, string alias, string conditionType, string condition)</p><p class="description">Creates and adds a join over an entity association to the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#join()">join</a>(string join, string alias, string conditionType, string condition)</p><p class="description">Creates and adds a join over an entity association to the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#leftJoin()">leftJoin</a>(string join, string alias, string conditionType, string condition)</p><p class="description">Creates and adds a left join over an entity association to the query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#orHaving()">orHaving</a>(mixed having)</p><p class="description">Adds a restriction over the groups of the query, forming a logical
disjunction with any existing having restrictions.</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#orWhere()">orWhere</a>(mixed where)</p><p class="description">Adds one or more restrictions to the query results, forming a logical
disjunction with any previously specified restrictions.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#orderBy()">orderBy</a>(string sort, string order)</p><p class="description">Specifies an ordering for the query results.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#select()">select</a>(mixed select)</p><p class="description">Specifies an item that is to be returned in the query result.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#set()">set</a>(string key, string value)</p><p class="description">Sets a new value for a field in a bulk update query.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#setFirstResult()">setFirstResult</a>(integer firstResult)</p><p class="description">Sets the position of the first result to retrieve (the "offset").</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#setMaxResults()">setMaxResults</a>(integer maxResults)</p><p class="description">Sets the maximum number of results to retrieve (the "limit").</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#setParameter()">setParameter</a>(string|integer key, mixed value)</p><p class="description">Sets a query parameter for the query being constructed.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#setParameters()">setParameters</a>(array params)</p><p class="description">Sets a collection of query parameters for the query being constructed.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#update()">update</a>(string update, string alias)</p><p class="description">Turns the query being built into a bulk update query that ranges over
a certain entity type.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a></td>
<td class="description"><p class="name"><a href="#where()">where</a>(mixed predicates)</p><p class="description">Specifies one or more restrictions to the query result.
</p></td>
</tr>
</table>

<h2 id="detail_field">Field Detail</h2>
<div class="location">/Doctrine/ORM/QueryBuilder.php at line 37</div>
<h3 id="DELETE">DELETE</h3>
<code class="signature">public final  int <strong>DELETE</strong> = 1</code>
<div class="details">
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 36</div>
<h3 id="SELECT">SELECT</h3>
<code class="signature">public final  int <strong>$SELECT</strong></code>
<div class="details">
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 42</div>
<h3 id="STATE_CLEAN">STATE_CLEAN</h3>
<code class="signature">public final  int <strong>STATE_CLEAN</strong> = 1</code>
<div class="details">
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 41</div>
<h3 id="STATE_DIRTY">STATE_DIRTY</h3>
<code class="signature">public final  int <strong>$STATE_DIRTY</strong></code>
<div class="details">
<p>The builder states.</p></div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 38</div>
<h3 id="UPDATE">UPDATE</h3>
<code class="signature">public final  int <strong>UPDATE</strong> = 2</code>
<div class="details">
</div>

<hr>

<h2 id="detail_constr">Constructor Detail</h2>
<div class="location">/Doctrine/ORM/QueryBuilder.php at line 98</div>
<h3 id="QueryBuilder()">QueryBuilder</h3>
<code class="signature">public <strong>QueryBuilder</strong>(<a href="../../doctrine/orm/entitymanager.html">EntityManager</a> em)</code>
<div class="details">
<p>Initializes a new <tt>QueryBuilder</tt> that uses the given <tt>EntityManager</tt>.</p><dl>
<dt>Parameters:</dt>
<dd>em - The EntityManager to use.</dd>
</dl>
</div>

<hr>

<h2 id="detail_method">Method Detail</h2>
<div class="location">/Doctrine/ORM/QueryBuilder.php at line 358</div>
<h3 id="add()">add</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>add</strong>(string dqlPartName, string dqlPart, string append)</code>
<div class="details">
<p>Either appends to or replaces a single, generic query part.</p><p>The available parts are: 'select', 'from', 'join', 'set', 'where',
'groupBy', 'having' and 'orderBy'.</p><dl>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 725</div>
<h3 id="addGroupBy()">addGroupBy</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>addGroupBy</strong>(string groupBy)</code>
<div class="details">
<p>Adds a grouping expression to the query.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->groupBy('u.lastLogin');
->addGroupBy('u.createdAt')
</code></p><dl>
<dt>Parameters:</dt>
<dd>groupBy - The grouping expression.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 811</div>
<h3 id="addOrderBy()">addOrderBy</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>addOrderBy</strong>(string sort, string order)</code>
<div class="details">
<p>Adds an ordering to the query results.</p><dl>
<dt>Parameters:</dt>
<dd>sort - The ordering expression.</dd>
<dd>order - The ordering direction.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 414</div>
<h3 id="addSelect()">addSelect</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>addSelect</strong>(mixed select)</code>
<div class="details">
<p>Adds an item that is to be returned in the query result.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->addSelect('p')
->from('User', 'u')
->leftJoin('u.Phonenumbers', 'p');
</code></p><dl>
<dt>Parameters:</dt>
<dd>select - The selection expression.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 753</div>
<h3 id="andHaving()">andHaving</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>andHaving</strong>(mixed having)</code>
<div class="details">
<p>Adds a restriction over the groups of the query, forming a logical
conjunction with any existing having restrictions.</p><dl>
<dt>Parameters:</dt>
<dd>having - The restriction to append.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 645</div>
<h3 id="andWhere()">andWhere</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>andWhere</strong>(mixed where)</code>
<div class="details">
<p>Adds one or more restrictions to the query results, forming a logical
conjunction with any previously specified restrictions.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where('u.username LIKE ?')
->andWhere('u.is_active = 1');
</code></p><dl>
<dt>Parameters:</dt>
<dd>where - The query restrictions.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
<dt>See Also:</dt>
<dd>where()</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 442</div>
<h3 id="delete()">delete</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>delete</strong>(string delete, string alias)</code>
<div class="details">
<p>Turns the query being built into a bulk delete query that ranges over
a certain entity type.</p><p><code>
$qb = $em->createQueryBuilder()
->delete('User', 'u')
->where('u.id = :user_id');
->setParameter(':user_id', 1);
</code></p><dl>
<dt>Parameters:</dt>
<dd>delete - The class/type whose instances are subject to the deletion.</dd>
<dd>alias - The class/type alias used in the constructed query.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 119</div>
<h3 id="expr()">expr</h3>
<code class="signature">public  <a href="../../doctrine/orm/query/expr.html">Expr</a> <strong>expr</strong>()</code>
<div class="details">
<p>Gets an ExpressionBuilder used for object-oriented construction of query expressions.
This producer method is intended for convenient inline usage. Example:</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where($qb->expr()->eq('u.id', 1));
</code></p><p>For more complex expression construction, consider storing the expression
builder object in a local variable.</p></div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 493</div>
<h3 id="from()">from</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>from</strong>(string from, string alias)</code>
<div class="details">
<p>Create and add a query root corresponding to the entity identified by the given alias,
forming a cartesian product with any existing query roots.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
</code></p><dl>
<dt>Parameters:</dt>
<dd>from - The class name.</dd>
<dd>alias - The alias of the class.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 166</div>
<h3 id="getDQL()">getDQL</h3>
<code class="signature">public  string <strong>getDQL</strong>()</code>
<div class="details">
<p>Get the complete DQL string formed by the current specifications of this QueryBuilder.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
echo $qb->getDql(); // SELECT u FROM User u
</code></p><dl>
<dt>Returns:</dt>
<dd>The DQL query string.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 823</div>
<h3 id="getDQLPart()">getDQLPart</h3>
<code class="signature">public  mixed <strong>getDQLPart</strong>(string queryPartName)</code>
<div class="details">
<p>Get a query part by its name.</p><dl>
<dt>Returns:</dt>
<dd>$queryPart</dd>
<dt>Todo:</dt>
<dd>Rename: getQueryPart (or remove?)</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 834</div>
<h3 id="getDQLParts()">getDQLParts</h3>
<code class="signature">public  array <strong>getDQLParts</strong>()</code>
<div class="details">
<p>Get all query parts.</p><dl>
<dt>Returns:</dt>
<dd>$dqlParts</dd>
<dt>Todo:</dt>
<dd>Rename: getQueryParts (or remove?)</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 139</div>
<h3 id="getEntityManager()">getEntityManager</h3>
<code class="signature">public  <a href="../../doctrine/orm/entitymanager.html">EntityManager</a> <strong>getEntityManager</strong>()</code>
<div class="details">
<p>Get the associated EntityManager for this query builder.</p></div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 319</div>
<h3 id="getFirstResult()">getFirstResult</h3>
<code class="signature">public  integer <strong>getFirstResult</strong>()</code>
<div class="details">
<p>Gets the position of the first result the query object was set to retrieve (the "offset").
Returns NULL if <code><a href="../../doctrine/orm/query.html#setFirstResult()">setFirstResult</a></code> was not applied to this QueryBuilder.</p><dl>
<dt>Returns:</dt>
<dd>The position of the first result.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 342</div>
<h3 id="getMaxResults()">getMaxResults</h3>
<code class="signature">public  integer <strong>getMaxResults</strong>()</code>
<div class="details">
<p>Gets the maximum number of results the query object was set to retrieve (the "limit").
Returns NULL if <code><a href="../../doctrine/orm/query.html#setMaxResults()">setMaxResults</a></code> was not applied to this query builder.</p><dl>
<dt>Returns:</dt>
<dd>Maximum number of results.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 296</div>
<h3 id="getParameter()">getParameter</h3>
<code class="signature">public  mixed <strong>getParameter</strong>(mixed key)</code>
<div class="details">
<p>Gets a (previously set) query parameter of the query being constructed.</p><dl>
<dt>Parameters:</dt>
<dd>key - The key (index or name) of the bound parameter.</dd>
<dt>Returns:</dt>
<dd>The value of the bound parameter.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 285</div>
<h3 id="getParameters()">getParameters</h3>
<code class="signature">public  array <strong>getParameters</strong>()</code>
<div class="details">
<p>Gets all defined query parameters for the query being constructed.</p><dl>
<dt>Returns:</dt>
<dd>The currently defined query parameters.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 208</div>
<h3 id="getQuery()">getQuery</h3>
<code class="signature">public  <a href="../../doctrine/orm/query.html">Query</a> <strong>getQuery</strong>()</code>
<div class="details">
<p>Constructs a Query instance from the current specifications of the builder.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u');
$q = $qb->getQuery();
$results = $q->execute();
</code></p></div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 231</div>
<h3 id="getRootAlias()">getRootAlias</h3>
<code class="signature">public  string <strong>getRootAlias</strong>()</code>
<div class="details">
<p>Gets the root alias of the query. This is the first entity alias involved
in the construction of the query.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u');</p><p>echo $qb->getRootAlias(); // u
</code></p><dl>
<dt>Returns:</dt>
<dd>$rootAlias</dd>
<dt>Todo:</dt>
<dd>Rename/Refactor: getRootAliases(), there can be multiple roots!</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 149</div>
<h3 id="getState()">getState</h3>
<code class="signature">public  integer <strong>getState</strong>()</code>
<div class="details">
<p>Get the state of this query builder instance.</p><dl>
<dt>Returns:</dt>
<dd>Either QueryBuilder::STATE_DIRTY or QueryBuilder::STATE_CLEAN.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 129</div>
<h3 id="getType()">getType</h3>
<code class="signature">public  integer <strong>getType</strong>()</code>
<div class="details">
<p>Get the type of the currently built query.</p></div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 705</div>
<h3 id="groupBy()">groupBy</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>groupBy</strong>(string groupBy)</code>
<div class="details">
<p>Specifies a grouping over the results of the query.
Replaces any previously specified groupings, if any.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->groupBy('u.id');
</code></p><dl>
<dt>Parameters:</dt>
<dd>groupBy - The grouping expression.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 737</div>
<h3 id="having()">having</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>having</strong>(mixed having)</code>
<div class="details">
<p>Specifies a restriction over the groups of the query.
Replaces any previous having restrictions, if any.</p><dl>
<dt>Parameters:</dt>
<dd>having - The restriction over the groups.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 542</div>
<h3 id="innerJoin()">innerJoin</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>innerJoin</strong>(string join, string alias, string conditionType, string condition)</code>
<div class="details">
<p>Creates and adds a join over an entity association to the query.</p><p>The entities in the joined association will be fetched as part of the query
result if the alias used for the joined association is placed in the select
expressions.</p><p>[php]
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->innerJoin('u.Phonenumbers', 'p', Expr\Join::WITH, 'p.is_primary = 1');</p><dl>
<dt>Parameters:</dt>
<dd>join - The relationship to join</dd>
<dd>alias - The alias of the join</dd>
<dd>conditionType - The condition type constant. Either ON or WITH.</dd>
<dd>condition - The condition for the join</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 518</div>
<h3 id="join()">join</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>join</strong>(string join, string alias, string conditionType, string condition)</code>
<div class="details">
<p>Creates and adds a join over an entity association to the query.</p><p>The entities in the joined association will be fetched as part of the query
result if the alias used for the joined association is placed in the select
expressions.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->join('u.Phonenumbers', 'p', Expr\Join::WITH, 'p.is_primary = 1');
</code></p><dl>
<dt>Parameters:</dt>
<dd>join - The relationship to join</dd>
<dd>alias - The alias of the join</dd>
<dd>conditionType - The condition type constant. Either ON or WITH.</dd>
<dd>condition - The condition for the join</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 569</div>
<h3 id="leftJoin()">leftJoin</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>leftJoin</strong>(string join, string alias, string conditionType, string condition)</code>
<div class="details">
<p>Creates and adds a left join over an entity association to the query.</p><p>The entities in the joined association will be fetched as part of the query
result if the alias used for the joined association is placed in the select
expressions.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->leftJoin('u.Phonenumbers', 'p', Expr\Join::WITH, 'p.is_primary = 1');
</code></p><dl>
<dt>Parameters:</dt>
<dd>join - The relationship to join</dd>
<dd>alias - The alias of the join</dd>
<dd>conditionType - The condition type constant. Either ON or WITH.</dd>
<dd>condition - The condition for the join</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 775</div>
<h3 id="orHaving()">orHaving</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>orHaving</strong>(mixed having)</code>
<div class="details">
<p>Adds a restriction over the groups of the query, forming a logical
disjunction with any existing having restrictions.</p><dl>
<dt>Parameters:</dt>
<dd>having - The restriction to add.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 676</div>
<h3 id="orWhere()">orWhere</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>orWhere</strong>(mixed where)</code>
<div class="details">
<p>Adds one or more restrictions to the query results, forming a logical
disjunction with any previously specified restrictions.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where('u.id = 1')
->orWhere('u.id = 2');
</code></p><dl>
<dt>Parameters:</dt>
<dd>where - The WHERE statement</dd>
<dt>Returns:</dt>
<dd>$qb</dd>
<dt>See Also:</dt>
<dd>where()</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 798</div>
<h3 id="orderBy()">orderBy</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>orderBy</strong>(string sort, string order)</code>
<div class="details">
<p>Specifies an ordering for the query results.
Replaces any previously specified orderings, if any.</p><dl>
<dt>Parameters:</dt>
<dd>sort - The ordering expression.</dd>
<dd>order - The ordering direction.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 387</div>
<h3 id="select()">select</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>select</strong>(mixed select)</code>
<div class="details">
<p>Specifies an item that is to be returned in the query result.
Replaces any previously specified selections, if any.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u', 'p')
->from('User', 'u')
->leftJoin('u.Phonenumbers', 'p');
</code></p><dl>
<dt>Parameters:</dt>
<dd>select - The selection expressions.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 590</div>
<h3 id="set()">set</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>set</strong>(string key, string value)</code>
<div class="details">
<p>Sets a new value for a field in a bulk update query.</p><p><code>
$qb = $em->createQueryBuilder()
->update('User', 'u')
->set('u.password', md5('password'))
->where('u.id = ?');
</code></p><dl>
<dt>Parameters:</dt>
<dd>key - The key/field to set.</dd>
<dd>value - The value, expression, placeholder, etc.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 307</div>
<h3 id="setFirstResult()">setFirstResult</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>setFirstResult</strong>(integer firstResult)</code>
<div class="details">
<p>Sets the position of the first result to retrieve (the "offset").</p><dl>
<dt>Parameters:</dt>
<dd>firstResult - The first result to return.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 330</div>
<h3 id="setMaxResults()">setMaxResults</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>setMaxResults</strong>(integer maxResults)</code>
<div class="details">
<p>Sets the maximum number of results to retrieve (the "limit").</p><dl>
<dt>Parameters:</dt>
<dd>maxResults - The maximum number of results to retrieve.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 251</div>
<h3 id="setParameter()">setParameter</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>setParameter</strong>(string|integer key, mixed value)</code>
<div class="details">
<p>Sets a query parameter for the query being constructed.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where('u.id = :user_id')
->setParameter(':user_id', 1);
</code></p><dl>
<dt>Parameters:</dt>
<dd>key - The parameter position or name.</dd>
<dd>value - The parameter value.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 274</div>
<h3 id="setParameters()">setParameters</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>setParameters</strong>(array params)</code>
<div class="details">
<p>Sets a collection of query parameters for the query being constructed.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where('u.id = :user_id1 OR u.id = :user_id2')
->setParameters(array(
':user_id1' => 1,
':user_id2' => 2
));
</code></p><dl>
<dt>Parameters:</dt>
<dd>params - The query parameters to set.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 468</div>
<h3 id="update()">update</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>update</strong>(string update, string alias)</code>
<div class="details">
<p>Turns the query being built into a bulk update query that ranges over
a certain entity type.</p><p><code>
$qb = $em->createQueryBuilder()
->update('User', 'u')
->set('u.password', md5('password'))
->where('u.id = ?');
</code></p><dl>
<dt>Parameters:</dt>
<dd>update - The class/type whose instances are subject to the update.</dd>
<dd>alias - The class/type alias used in the constructed query.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="location">/Doctrine/ORM/QueryBuilder.php at line 620</div>
<h3 id="where()">where</h3>
<code class="signature">public  <a href="../../doctrine/orm/querybuilder.html">QueryBuilder</a> <strong>where</strong>(mixed predicates)</code>
<div class="details">
<p>Specifies one or more restrictions to the query result.
Replaces any previously specified restrictions, if any.</p><p><code>
$qb = $em->createQueryBuilder()
->select('u')
->from('User', 'u')
->where('u.id = ?');</p><p>You can optionally programatically build and/or expressions
$qb = $em->createQueryBuilder();</p><p>$or = $qb->expr()->orx();
$or->add($qb->expr()->eq('u.id', 1));
$or->add($qb->expr()->eq('u.id', 2));</p><p>$qb->update('User', 'u')
->set('u.password', md5('password'))
->where($or);
</code></p><dl>
<dt>Parameters:</dt>
<dd>predicates - The restriction predicates.</dd>
<dt>Returns:</dt>
<dd>This QueryBuilder instance.</dd>
</dl>
</div>

<hr>

<div class="header">
<h1>Doctrine</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../doctrine/orm/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../doctrine/orm/package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../doctrine/orm/querybuilder.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>
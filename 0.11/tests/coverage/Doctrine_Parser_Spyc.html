<html>
    <head>
        <title>Coverage for Doctrine_Parser_Spyc</title>
        <style type="text/css">
            .covered{ background: green;}
            .normal{ background: white;}
            .red{ background: red;}
            .orange{ background: #f90;}
       </style>
</head>
<body><h1>Coverage for Doctrine_Parser_Spyc</h1><p><a href="index.php">Back to coverage report</a></p><table>
<tr><td>1</td>
<td class="normal">&lt;?php
</td></tr>
<tr><td>2</td>
<td class="normal">&nbsp;&nbsp;/**
</td></tr>
<tr><td>3</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;Simple&nbsp;PHP&nbsp;YAML&nbsp;Class.
</td></tr>
<tr><td>4</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>5</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;class&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;read&nbsp;a&nbsp;YAML&nbsp;file&nbsp;and&nbsp;convert&nbsp;its&nbsp;contents
</td></tr>
<tr><td>6</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array.&nbsp;&nbsp;It&nbsp;currently&nbsp;supports&nbsp;a&nbsp;very&nbsp;limited&nbsp;subsection&nbsp;of
</td></tr>
<tr><td>7</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;YAML&nbsp;spec.
</td></tr>
<tr><td>8</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>9</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;Usage:
</td></tr>
<tr><td>10</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;&lt;code&gt;
</td></tr>
<tr><td>11</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;$parser&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc;
</td></tr>
<tr><td>12</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;$array&nbsp;&nbsp;=&nbsp;$parser-&gt;load($file);
</td></tr>
<tr><td>13</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;&lt;/code&gt;
</td></tr>
<tr><td>14</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;@package&nbsp;Doctrine
</td></tr>
<tr><td>15</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*&nbsp;@subpackage&nbsp;Spyc
</td></tr>
<tr><td>16</td>
<td class="normal">&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>17</td>
<td class="normal">&nbsp;&nbsp;class&nbsp;Doctrine_Parser_Spyc&nbsp;{
</td></tr>
<tr><td>18</td>
<td class="normal">
</td></tr>
<tr><td>19</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>20</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Load&nbsp;YAML&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array&nbsp;statically
</td></tr>
<tr><td>21</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>22</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;load&nbsp;method,&nbsp;when&nbsp;supplied&nbsp;with&nbsp;a&nbsp;YAML&nbsp;stream&nbsp;(string&nbsp;or&nbsp;file),
</td></tr>
<tr><td>23</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;will&nbsp;do&nbsp;its&nbsp;best&nbsp;to&nbsp;convert&nbsp;YAML&nbsp;in&nbsp;a&nbsp;file&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array.&nbsp;&nbsp;Pretty
</td></tr>
<tr><td>24</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;simple.
</td></tr>
<tr><td>25</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Usage:
</td></tr>
<tr><td>26</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&lt;code&gt;
</td></tr>
<tr><td>27</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;Doctrine_Parser_Spyc::YAMLLoad('lucky.yaml');
</td></tr>
<tr><td>28</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;print_r($array);
</td></tr>
<tr><td>29</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&lt;/code&gt;
</td></tr>
<tr><td>30</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;public
</td></tr>
<tr><td>31</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>32</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$input&nbsp;Path&nbsp;of&nbsp;YAML&nbsp;file&nbsp;or&nbsp;string&nbsp;containing&nbsp;YAML
</td></tr>
<tr><td>33</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>34</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;YAMLLoad($input)&nbsp;{
</td></tr>
<tr><td>35</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spyc&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc;
</td></tr>
<tr><td>36</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$spyc-&gt;load($input);
</td></tr>
<tr><td>37</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>38</td>
<td class="normal">
</td></tr>
<tr><td>39</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>40</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Dump&nbsp;YAML&nbsp;from&nbsp;PHP&nbsp;array&nbsp;statically
</td></tr>
<tr><td>41</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>42</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;dump&nbsp;method,&nbsp;when&nbsp;supplied&nbsp;with&nbsp;an&nbsp;array,&nbsp;will&nbsp;do&nbsp;its&nbsp;best
</td></tr>
<tr><td>43</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;to&nbsp;convert&nbsp;the&nbsp;array&nbsp;into&nbsp;friendly&nbsp;YAML.&nbsp;&nbsp;Pretty&nbsp;simple.&nbsp;&nbsp;Feel&nbsp;free&nbsp;to
</td></tr>
<tr><td>44</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;save&nbsp;the&nbsp;returned&nbsp;string&nbsp;as&nbsp;nothing.yaml&nbsp;and&nbsp;pass&nbsp;it&nbsp;around.
</td></tr>
<tr><td>45</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>46</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Oh,&nbsp;and&nbsp;you&nbsp;can&nbsp;decide&nbsp;how&nbsp;big&nbsp;the&nbsp;indent&nbsp;is&nbsp;and&nbsp;what&nbsp;the&nbsp;wordwrap
</td></tr>
<tr><td>47</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;for&nbsp;folding&nbsp;is.&nbsp;&nbsp;Pretty&nbsp;cool&nbsp;--&nbsp;just&nbsp;pass&nbsp;in&nbsp;'false'&nbsp;for&nbsp;either&nbsp;if
</td></tr>
<tr><td>48</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;default.
</td></tr>
<tr><td>49</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>50</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indent's&nbsp;default&nbsp;is&nbsp;2&nbsp;spaces,&nbsp;wordwrap's&nbsp;default&nbsp;is&nbsp;40&nbsp;characters.&nbsp;&nbsp;And
</td></tr>
<tr><td>51</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;you&nbsp;can&nbsp;turn&nbsp;off&nbsp;wordwrap&nbsp;by&nbsp;passing&nbsp;in&nbsp;0.
</td></tr>
<tr><td>52</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>53</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;public
</td></tr>
<tr><td>54</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>55</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$array&nbsp;PHP&nbsp;array
</td></tr>
<tr><td>56</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$indent&nbsp;Pass&nbsp;in&nbsp;false&nbsp;to&nbsp;use&nbsp;the&nbsp;default,&nbsp;which&nbsp;is&nbsp;2
</td></tr>
<tr><td>57</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$wordwrap&nbsp;Pass&nbsp;in&nbsp;0&nbsp;for&nbsp;no&nbsp;wordwrap,&nbsp;false&nbsp;for&nbsp;default&nbsp;(40)
</td></tr>
<tr><td>58</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>59</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;YAMLDump($array,$indent&nbsp;=&nbsp;false,$wordwrap&nbsp;=&nbsp;false)&nbsp;{
</td></tr>
<tr><td>60</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spyc&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc;
</td></tr>
<tr><td>61</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$spyc-&gt;dump($array,$indent,$wordwrap);
</td></tr>
<tr><td>62</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>63</td>
<td class="normal">
</td></tr>
<tr><td>64</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>65</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Load&nbsp;YAML&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array&nbsp;from&nbsp;an&nbsp;instantiated&nbsp;object
</td></tr>
<tr><td>66</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>67</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;load&nbsp;method,&nbsp;when&nbsp;supplied&nbsp;with&nbsp;a&nbsp;YAML&nbsp;stream&nbsp;(string&nbsp;or&nbsp;file&nbsp;path),
</td></tr>
<tr><td>68</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;will&nbsp;do&nbsp;its&nbsp;best&nbsp;to&nbsp;convert&nbsp;the&nbsp;YAML&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array.&nbsp;&nbsp;Pretty&nbsp;simple.
</td></tr>
<tr><td>69</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Usage:
</td></tr>
<tr><td>70</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&lt;code&gt;
</td></tr>
<tr><td>71</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;$parser&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc;
</td></tr>
<tr><td>72</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;$array&nbsp;&nbsp;=&nbsp;$parser-&gt;load('lucky.yaml');
</td></tr>
<tr><td>73</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;print_r($array);
</td></tr>
<tr><td>74</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&lt;/code&gt;
</td></tr>
<tr><td>75</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;public
</td></tr>
<tr><td>76</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>77</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$input&nbsp;Path&nbsp;of&nbsp;YAML&nbsp;file&nbsp;or&nbsp;string&nbsp;containing&nbsp;YAML
</td></tr>
<tr><td>78</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>79</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;load($input)&nbsp;{
</td></tr>
<tr><td>80</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;See&nbsp;what&nbsp;type&nbsp;of&nbsp;input&nbsp;we're&nbsp;talking&nbsp;about
</td></tr>
<tr><td>81</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;it's&nbsp;not&nbsp;a&nbsp;file,&nbsp;assume&nbsp;it's&nbsp;a&nbsp;string
</td></tr>
<tr><td>82</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($input)&nbsp;&amp;&amp;&nbsp;(strpos($input,&nbsp;&quot;\n&quot;)&nbsp;===&nbsp;false)
</td></tr>
<tr><td>83</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;&nbsp;file_exists($input))&nbsp;{
</td></tr>
<tr><td>84</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yaml&nbsp;=&nbsp;file($input);
</td></tr>
<tr><td>85</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>86</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$yaml&nbsp;=&nbsp;explode(&quot;\n&quot;,$input);
</td></tr>
<tr><td>87</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>88</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Initiate&nbsp;some&nbsp;objects&nbsp;and&nbsp;values
</td></tr>
<tr><td>89</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$base&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc_YamlNode&nbsp;(1);
</td></tr>
<tr><td>90</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$base-&gt;indent&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0;
</td></tr>
<tr><td>91</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastIndent&nbsp;=&nbsp;0;
</td></tr>
<tr><td>92</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastNode&nbsp;&nbsp;&nbsp;=&nbsp;$base-&gt;id;
</td></tr>
<tr><td>93</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_inBlock&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;false;
</td></tr>
<tr><td>94</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_isInline&nbsp;&nbsp;&nbsp;=&nbsp;false;
</td></tr>
<tr><td>95</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_nodeId&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2;
</td></tr>
<tr><td>96</td>
<td class="normal">
</td></tr>
<tr><td>97</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($yaml&nbsp;as&nbsp;$linenum&nbsp;=&gt;&nbsp;$line)&nbsp;{
</td></tr>
<tr><td>98</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ifchk&nbsp;=&nbsp;trim($line);
</td></tr>
<tr><td>99</td>
<td class="normal">
</td></tr>
<tr><td>100</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;line&nbsp;starts&nbsp;with&nbsp;a&nbsp;tab&nbsp;(instead&nbsp;of&nbsp;a&nbsp;space),&nbsp;throw&nbsp;a&nbsp;fit.
</td></tr>
<tr><td>101</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^(\t)+(\w+)/',&nbsp;$line))&nbsp;{
</td></tr>
<tr><td>102</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$err&nbsp;=&nbsp;'ERROR:&nbsp;Line&nbsp;'.&nbsp;($linenum&nbsp;+&nbsp;1)&nbsp;.'&nbsp;in&nbsp;your&nbsp;input&nbsp;YAML&nbsp;begins'.
</td></tr>
<tr><td>103</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'&nbsp;with&nbsp;a&nbsp;tab.&nbsp;&nbsp;YAML&nbsp;only&nbsp;recognizes&nbsp;spaces.&nbsp;&nbsp;Please&nbsp;reformat.';
</td></tr>
<tr><td>104</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die($err);
</td></tr>
<tr><td>105</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>106</td>
<td class="normal">
</td></tr>
<tr><td>107</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;false&nbsp;&amp;&amp;&nbsp;empty($ifchk))&nbsp;{
</td></tr>
<tr><td>108</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;
</td></tr>
<tr><td>109</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($this-&gt;_inBlock&nbsp;==&nbsp;true&nbsp;&amp;&amp;&nbsp;empty($ifchk))&nbsp;{
</td></tr>
<tr><td>110</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$this-&gt;_lastNode];
</td></tr>
<tr><td>111</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last-&gt;data[key($last-&gt;data)]&nbsp;.=&nbsp;&quot;\n&quot;;
</td></tr>
<tr><td>112</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($ifchk{0}&nbsp;!=&nbsp;'#'&nbsp;&amp;&amp;&nbsp;substr($ifchk,0,3)&nbsp;!=&nbsp;'---')&nbsp;{
</td></tr>
<tr><td>113</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Create&nbsp;a&nbsp;new&nbsp;node&nbsp;and&nbsp;get&nbsp;its&nbsp;indent
</td></tr>
<tr><td>114</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;new&nbsp;Doctrine_Parser_Spyc_YamlNode&nbsp;($this-&gt;_nodeId);
</td></tr>
<tr><td>115</td>
<td class="red">		&nbsp;&nbsp;$this-&gt;_nodeId++;
</td></tr>
<tr><td>116</td>
<td class="orange">
</td></tr>
<tr><td>117</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;indent&nbsp;=&nbsp;$this-&gt;_getIndent($line);
</td></tr>
<tr><td>118</td>
<td class="normal">
</td></tr>
<tr><td>119</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;where&nbsp;the&nbsp;node&nbsp;lies&nbsp;in&nbsp;the&nbsp;hierarchy
</td></tr>
<tr><td>120</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_lastIndent&nbsp;==&nbsp;$node-&gt;indent)&nbsp;{
</td></tr>
<tr><td>121</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;we're&nbsp;in&nbsp;a&nbsp;block,&nbsp;add&nbsp;the&nbsp;text&nbsp;to&nbsp;the&nbsp;parent's&nbsp;data
</td></tr>
<tr><td>122</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;true)&nbsp;{
</td></tr>
<tr><td>123</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$this-&gt;_lastNode];
</td></tr>
<tr><td>124</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;.=&nbsp;trim($line).$this-&gt;_blockEnd;
</td></tr>
<tr><td>125</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>126</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;current&nbsp;node's&nbsp;parent&nbsp;is&nbsp;the&nbsp;same&nbsp;as&nbsp;the&nbsp;previous&nbsp;node's
</td></tr>
<tr><td>127</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($this-&gt;_allNodes[$this-&gt;_lastNode]))&nbsp;{
</td></tr>
<tr><td>128</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;parent&nbsp;=&nbsp;$this-&gt;_allNodes[$this-&gt;_lastNode]-&gt;parent;
</td></tr>
<tr><td>129</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>130</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>131</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($this-&gt;_lastIndent&nbsp;&lt;&nbsp;$node-&gt;indent)&nbsp;{
</td></tr>
<tr><td>132</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;true)&nbsp;{
</td></tr>
<tr><td>133</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$this-&gt;_lastNode];
</td></tr>
<tr><td>134</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;.=&nbsp;trim($line).$this-&gt;_blockEnd;
</td></tr>
<tr><td>135</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;false)&nbsp;{
</td></tr>
<tr><td>136</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;current&nbsp;node's&nbsp;parent&nbsp;is&nbsp;the&nbsp;previous&nbsp;node
</td></tr>
<tr><td>137</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;parent&nbsp;=&nbsp;$this-&gt;_lastNode;
</td></tr>
<tr><td>138</td>
<td class="red">
</td></tr>
<tr><td>139</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;last&nbsp;node's&nbsp;data&nbsp;was&nbsp;&gt;&nbsp;or&nbsp;|&nbsp;we&nbsp;need&nbsp;to
</td></tr>
<tr><td>140</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;start&nbsp;blocking&nbsp;i.e.&nbsp;taking&nbsp;in&nbsp;all&nbsp;lines&nbsp;as&nbsp;a&nbsp;text&nbsp;value&nbsp;until
</td></tr>
<tr><td>141</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;we&nbsp;drop&nbsp;our&nbsp;indent.
</td></tr>
<tr><td>142</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$node-&gt;parent];
</td></tr>
<tr><td>143</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$node-&gt;parent]-&gt;children&nbsp;=&nbsp;true;
</td></tr>
<tr><td>144</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($parent-&gt;data))&nbsp;{
</td></tr>
<tr><td>145</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chk&nbsp;=&nbsp;'';
</td></tr>
<tr><td>146</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset&nbsp;($parent-&gt;data[key($parent-&gt;data)]))
</td></tr>
<tr><td>147</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$chk&nbsp;=&nbsp;$parent-&gt;data[key($parent-&gt;data)];
</td></tr>
<tr><td>148</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($chk&nbsp;===&nbsp;'&gt;')&nbsp;{
</td></tr>
<tr><td>149</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_inBlock&nbsp;&nbsp;=&nbsp;true;
</td></tr>
<tr><td>150</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_blockEnd&nbsp;=&nbsp;'&nbsp;';
</td></tr>
<tr><td>151</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;=
</td></tr>
<tr><td>152</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str_replace('&gt;','',$parent-&gt;data[key($parent-&gt;data)]);
</td></tr>
<tr><td>153</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;.=&nbsp;trim($line).'&nbsp;';
</td></tr>
<tr><td>154</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$node-&gt;parent]-&gt;children&nbsp;=&nbsp;false;
</td></tr>
<tr><td>155</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastIndent&nbsp;=&nbsp;$node-&gt;indent;
</td></tr>
<tr><td>156</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($chk&nbsp;===&nbsp;'|')&nbsp;{
</td></tr>
<tr><td>157</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_inBlock&nbsp;&nbsp;=&nbsp;true;
</td></tr>
<tr><td>158</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_blockEnd&nbsp;=&nbsp;&quot;\n&quot;;
</td></tr>
<tr><td>159</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;=
</td></tr>
<tr><td>160</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str_replace('|','',$parent-&gt;data[key($parent-&gt;data)]);
</td></tr>
<tr><td>161</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;data[key($parent-&gt;data)]&nbsp;.=&nbsp;trim($line).&quot;\n&quot;;
</td></tr>
<tr><td>162</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$node-&gt;parent]-&gt;children&nbsp;=&nbsp;false;
</td></tr>
<tr><td>163</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastIndent&nbsp;=&nbsp;$node-&gt;indent;
</td></tr>
<tr><td>164</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>165</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>166</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>167</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($this-&gt;_lastIndent&nbsp;&gt;&nbsp;$node-&gt;indent)&nbsp;{
</td></tr>
<tr><td>168</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Any&nbsp;block&nbsp;we&nbsp;had&nbsp;going&nbsp;is&nbsp;dead&nbsp;now
</td></tr>
<tr><td>169</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;true)&nbsp;{
</td></tr>
<tr><td>170</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_inBlock&nbsp;=&nbsp;false;
</td></tr>
<tr><td>171</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_blockEnd&nbsp;=&nbsp;&quot;\n&quot;)&nbsp;{
</td></tr>
<tr><td>172</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$this-&gt;_lastNode];
</td></tr>
<tr><td>173</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last-&gt;data[key($last-&gt;data)]&nbsp;=
</td></tr>
<tr><td>174</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trim($last-&gt;data[key($last-&gt;data)]);
</td></tr>
<tr><td>175</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>176</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>177</td>
<td class="red">
</td></tr>
<tr><td>178</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We&nbsp;don't&nbsp;know&nbsp;the&nbsp;parent&nbsp;of&nbsp;the&nbsp;node&nbsp;so&nbsp;we&nbsp;have&nbsp;to&nbsp;find&nbsp;it
</td></tr>
<tr><td>179</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;foreach&nbsp;($this-&gt;_allNodes&nbsp;as&nbsp;$n)&nbsp;{
</td></tr>
<tr><td>180</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($this-&gt;_indentSort[$node-&gt;indent]&nbsp;as&nbsp;$n)&nbsp;{
</td></tr>
<tr><td>181</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($n-&gt;indent&nbsp;==&nbsp;$node-&gt;indent)&nbsp;{
</td></tr>
<tr><td>182</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;parent&nbsp;=&nbsp;$n-&gt;parent;
</td></tr>
<tr><td>183</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>184</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>185</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>186</td>
<td class="covered">
</td></tr>
<tr><td>187</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_inBlock&nbsp;===&nbsp;false)&nbsp;{
</td></tr>
<tr><td>188</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;these&nbsp;properties&nbsp;with&nbsp;information&nbsp;from&nbsp;our&nbsp;current&nbsp;node
</td></tr>
<tr><td>189</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastIndent&nbsp;=&nbsp;$node-&gt;indent;
</td></tr>
<tr><td>190</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;the&nbsp;last&nbsp;node
</td></tr>
<tr><td>191</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_lastNode&nbsp;=&nbsp;$node-&gt;id;
</td></tr>
<tr><td>192</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Parse&nbsp;the&nbsp;YAML&nbsp;line&nbsp;and&nbsp;return&nbsp;its&nbsp;data
</td></tr>
<tr><td>193</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data&nbsp;=&nbsp;$this-&gt;_parseLine($line);
</td></tr>
<tr><td>194</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;node&nbsp;to&nbsp;the&nbsp;master&nbsp;list
</td></tr>
<tr><td>195</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$node-&gt;id]&nbsp;=&nbsp;$node;
</td></tr>
<tr><td>196</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;parent&nbsp;list
</td></tr>
<tr><td>197</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allParent[intval($node-&gt;parent)][]&nbsp;=&nbsp;$node-&gt;id;
</td></tr>
<tr><td>198</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;node&nbsp;in&nbsp;an&nbsp;indent&nbsp;array
</td></tr>
<tr><td>199</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_indentSort[$node-&gt;indent][]&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$node-&gt;id];
</td></tr>
<tr><td>200</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;node&nbsp;in&nbsp;a&nbsp;References&nbsp;array&nbsp;if&nbsp;this&nbsp;node
</td></tr>
<tr><td>201</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;has&nbsp;a&nbsp;YAML&nbsp;reference&nbsp;in&nbsp;it.
</td></tr>
<tr><td>202</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(
</td></tr>
<tr><td>203</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;(is_array($node-&gt;data))&nbsp;&amp;&amp;
</td></tr>
<tr><td>204</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isset($node-&gt;data[key($node-&gt;data)])&nbsp;&amp;&amp;
</td></tr>
<tr><td>205</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;!&nbsp;is_array($node-&gt;data[key($node-&gt;data)]))&nbsp;)
</td></tr>
<tr><td>206</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;
</td></tr>
<tr><td>207</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;(preg_match('/^&amp;([^&nbsp;]+)/',$node-&gt;data[key($node-&gt;data)]))
</td></tr>
<tr><td>208</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||
</td></tr>
<tr><td>209</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(preg_match('/^\*([^&nbsp;]+)/',$node-&gt;data[key($node-&gt;data)]))&nbsp;)
</td></tr>
<tr><td>210</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{
</td></tr>
<tr><td>211</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_haveRefs[]&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$node-&gt;id];
</td></tr>
<tr><td>212</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(
</td></tr>
<tr><td>213</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;(is_array($node-&gt;data))&nbsp;&amp;&amp;
</td></tr>
<tr><td>214</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isset($node-&gt;data[key($node-&gt;data)])&nbsp;&amp;&amp;
</td></tr>
<tr><td>215</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(is_array($node-&gt;data[key($node-&gt;data)]))&nbsp;)
</td></tr>
<tr><td>216</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{
</td></tr>
<tr><td>217</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Incomplete&nbsp;reference&nbsp;making&nbsp;code.&nbsp;&nbsp;Ugly,&nbsp;needs&nbsp;cleaned&nbsp;up.
</td></tr>
<tr><td>218</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($node-&gt;data[key($node-&gt;data)]&nbsp;as&nbsp;$d)&nbsp;{
</td></tr>
<tr><td>219</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!is_array($d)&nbsp;&amp;&amp;
</td></tr>
<tr><td>220</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;(preg_match('/^&amp;([^&nbsp;]+)/',$d))
</td></tr>
<tr><td>221</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||
</td></tr>
<tr><td>222</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(preg_match('/^\*([^&nbsp;]+)/',$d))&nbsp;)
</td></tr>
<tr><td>223</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;{
</td></tr>
<tr><td>224</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_haveRefs[]&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$node-&gt;id];
</td></tr>
<tr><td>225</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>226</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>227</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>228</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>229</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>230</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>231</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset($node);
</td></tr>
<tr><td>232</td>
<td class="normal">
</td></tr>
<tr><td>233</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Here&nbsp;we&nbsp;travel&nbsp;through&nbsp;node-space&nbsp;and&nbsp;pick&nbsp;out&nbsp;references&nbsp;(&amp;&nbsp;and&nbsp;*)
</td></tr>
<tr><td>234</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_linkReferences();
</td></tr>
<tr><td>235</td>
<td class="covered">
</td></tr>
<tr><td>236</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Build&nbsp;the&nbsp;PHP&nbsp;array&nbsp;out&nbsp;of&nbsp;node-space
</td></tr>
<tr><td>237</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$trunk&nbsp;=&nbsp;$this-&gt;_buildArray();
</td></tr>
<tr><td>238</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$trunk;
</td></tr>
<tr><td>239</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>240</td>
<td class="normal">
</td></tr>
<tr><td>241</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>242</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Dump&nbsp;PHP&nbsp;array&nbsp;to&nbsp;YAML
</td></tr>
<tr><td>243</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>244</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;dump&nbsp;method,&nbsp;when&nbsp;supplied&nbsp;with&nbsp;an&nbsp;array,&nbsp;will&nbsp;do&nbsp;its&nbsp;best
</td></tr>
<tr><td>245</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;to&nbsp;convert&nbsp;the&nbsp;array&nbsp;into&nbsp;friendly&nbsp;YAML.&nbsp;&nbsp;Pretty&nbsp;simple.&nbsp;&nbsp;Feel&nbsp;free&nbsp;to
</td></tr>
<tr><td>246</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;save&nbsp;the&nbsp;returned&nbsp;string&nbsp;as&nbsp;tasteful.yaml&nbsp;and&nbsp;pass&nbsp;it&nbsp;around.
</td></tr>
<tr><td>247</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>248</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Oh,&nbsp;and&nbsp;you&nbsp;can&nbsp;decide&nbsp;how&nbsp;big&nbsp;the&nbsp;indent&nbsp;is&nbsp;and&nbsp;what&nbsp;the&nbsp;wordwrap
</td></tr>
<tr><td>249</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;for&nbsp;folding&nbsp;is.&nbsp;&nbsp;Pretty&nbsp;cool&nbsp;--&nbsp;just&nbsp;pass&nbsp;in&nbsp;'false'&nbsp;for&nbsp;either&nbsp;if
</td></tr>
<tr><td>250</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;you&nbsp;want&nbsp;to&nbsp;use&nbsp;the&nbsp;default.
</td></tr>
<tr><td>251</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>252</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Indent's&nbsp;default&nbsp;is&nbsp;2&nbsp;spaces,&nbsp;wordwrap's&nbsp;default&nbsp;is&nbsp;40&nbsp;characters.&nbsp;&nbsp;And
</td></tr>
<tr><td>253</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;you&nbsp;can&nbsp;turn&nbsp;off&nbsp;wordwrap&nbsp;by&nbsp;passing&nbsp;in&nbsp;0.
</td></tr>
<tr><td>254</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>255</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;public
</td></tr>
<tr><td>256</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>257</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$array&nbsp;PHP&nbsp;array
</td></tr>
<tr><td>258</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$indent&nbsp;Pass&nbsp;in&nbsp;false&nbsp;to&nbsp;use&nbsp;the&nbsp;default,&nbsp;which&nbsp;is&nbsp;2
</td></tr>
<tr><td>259</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$wordwrap&nbsp;Pass&nbsp;in&nbsp;0&nbsp;for&nbsp;no&nbsp;wordwrap,&nbsp;false&nbsp;for&nbsp;default&nbsp;(40)
</td></tr>
<tr><td>260</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>261</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;dump($array,$indent&nbsp;=&nbsp;false,$wordwrap&nbsp;=&nbsp;false)&nbsp;{
</td></tr>
<tr><td>262</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Dumps&nbsp;to&nbsp;some&nbsp;very&nbsp;clean&nbsp;YAML.&nbsp;&nbsp;We'll&nbsp;have&nbsp;to&nbsp;add&nbsp;some&nbsp;more&nbsp;features
</td></tr>
<tr><td>263</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;and&nbsp;options&nbsp;soon.&nbsp;&nbsp;And&nbsp;better&nbsp;support&nbsp;for&nbsp;folding.
</td></tr>
<tr><td>264</td>
<td class="covered">
</td></tr>
<tr><td>265</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;New&nbsp;features&nbsp;and&nbsp;options.
</td></tr>
<tr><td>266</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($indent&nbsp;===&nbsp;false&nbsp;or&nbsp;!is_numeric($indent))&nbsp;{
</td></tr>
<tr><td>267</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dumpIndent&nbsp;=&nbsp;2;
</td></tr>
<tr><td>268</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>269</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dumpIndent&nbsp;=&nbsp;$indent;
</td></tr>
<tr><td>270</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>271</td>
<td class="normal">
</td></tr>
<tr><td>272</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($wordwrap&nbsp;===&nbsp;false&nbsp;or&nbsp;!is_numeric($wordwrap))&nbsp;{
</td></tr>
<tr><td>273</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dumpWordWrap&nbsp;=&nbsp;40;
</td></tr>
<tr><td>274</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>275</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_dumpWordWrap&nbsp;=&nbsp;$wordwrap;
</td></tr>
<tr><td>276</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>277</td>
<td class="covered">
</td></tr>
<tr><td>278</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;New&nbsp;YAML&nbsp;document
</td></tr>
<tr><td>279</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;&quot;---\n&quot;;
</td></tr>
<tr><td>280</td>
<td class="covered">
</td></tr>
<tr><td>281</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;at&nbsp;the&nbsp;base&nbsp;of&nbsp;the&nbsp;array&nbsp;and&nbsp;move&nbsp;through&nbsp;it.
</td></tr>
<tr><td>282</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($array&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
</td></tr>
<tr><td>283</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;.=&nbsp;$this-&gt;_yamlize($key,$value,0);
</td></tr>
<tr><td>284</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>285</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$string;
</td></tr>
<tr><td>286</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>287</td>
<td class="normal">
</td></tr>
<tr><td>288</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/****&nbsp;Private&nbsp;Properties&nbsp;****/
</td></tr>
<tr><td>289</td>
<td class="normal">
</td></tr>
<tr><td>290</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**#@+
</td></tr>
<tr><td>291</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>292</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;mixed
</td></tr>
<tr><td>293</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>294</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_haveRefs;
</td></tr>
<tr><td>295</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_allNodes;
</td></tr>
<tr><td>296</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_allParent;
</td></tr>
<tr><td>297</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_lastIndent;
</td></tr>
<tr><td>298</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_lastNode;
</td></tr>
<tr><td>299</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_inBlock;
</td></tr>
<tr><td>300</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_isInline;
</td></tr>
<tr><td>301</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_dumpIndent;
</td></tr>
<tr><td>302</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_dumpWordWrap;
</td></tr>
<tr><td>303</td>
<td class="normal">
</td></tr>
<tr><td>304</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**#@+*/
</td></tr>
<tr><td>305</td>
<td class="normal">
</td></tr>
<tr><td>306</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/****&nbsp;Public&nbsp;Properties&nbsp;****/
</td></tr>
<tr><td>307</td>
<td class="normal">
</td></tr>
<tr><td>308</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**#@+
</td></tr>
<tr><td>309</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;public
</td></tr>
<tr><td>310</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@var&nbsp;mixed
</td></tr>
<tr><td>311</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>312</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;$_nodeId;
</td></tr>
<tr><td>313</td>
<td class="normal">
</td></tr>
<tr><td>314</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**#@+*/
</td></tr>
<tr><td>315</td>
<td class="normal">
</td></tr>
<tr><td>316</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/****&nbsp;Private&nbsp;Methods&nbsp;****/
</td></tr>
<tr><td>317</td>
<td class="normal">
</td></tr>
<tr><td>318</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>319</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Attempts&nbsp;to&nbsp;convert&nbsp;a&nbsp;key&nbsp;/&nbsp;value&nbsp;array&nbsp;item&nbsp;to&nbsp;YAML
</td></tr>
<tr><td>320</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>321</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>322</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$key&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;key
</td></tr>
<tr><td>323</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$value&nbsp;The&nbsp;value&nbsp;of&nbsp;the&nbsp;item
</td></tr>
<tr><td>324</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$indent&nbsp;The&nbsp;indent&nbsp;of&nbsp;the&nbsp;current&nbsp;node
</td></tr>
<tr><td>325</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>326</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_yamlize($key,$value,$indent)&nbsp;{
</td></tr>
<tr><td>327</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($value))&nbsp;{
</td></tr>
<tr><td>328</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It&nbsp;has&nbsp;children.&nbsp;&nbsp;What&nbsp;to&nbsp;do?
</td></tr>
<tr><td>329</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Make&nbsp;it&nbsp;the&nbsp;right&nbsp;kind&nbsp;of&nbsp;item
</td></tr>
<tr><td>330</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;$this-&gt;_dumpNode($key,NULL,$indent);
</td></tr>
<tr><td>331</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Add&nbsp;the&nbsp;indent
</td></tr>
<tr><td>332</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;+=&nbsp;$this-&gt;_dumpIndent;
</td></tr>
<tr><td>333</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Yamlize&nbsp;the&nbsp;array
</td></tr>
<tr><td>334</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;.=&nbsp;$this-&gt;_yamlizeArray($value,$indent);
</td></tr>
<tr><td>335</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(&nbsp;!&nbsp;is_array($value))&nbsp;{
</td></tr>
<tr><td>336</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It&nbsp;doesn't&nbsp;have&nbsp;children.&nbsp;&nbsp;Yip.
</td></tr>
<tr><td>337</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;$this-&gt;_dumpNode($key,$value,$indent);
</td></tr>
<tr><td>338</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>339</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$string;
</td></tr>
<tr><td>340</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>341</td>
<td class="normal">
</td></tr>
<tr><td>342</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>343</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Attempts&nbsp;to&nbsp;convert&nbsp;an&nbsp;array&nbsp;to&nbsp;YAML
</td></tr>
<tr><td>344</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>345</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>346</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$array&nbsp;The&nbsp;array&nbsp;you&nbsp;want&nbsp;to&nbsp;convert
</td></tr>
<tr><td>347</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$indent&nbsp;The&nbsp;indent&nbsp;of&nbsp;the&nbsp;current&nbsp;level
</td></tr>
<tr><td>348</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>349</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_yamlizeArray($array,$indent)&nbsp;{
</td></tr>
<tr><td>350</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($array))&nbsp;{
</td></tr>
<tr><td>351</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;'';
</td></tr>
<tr><td>352</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($array&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
</td></tr>
<tr><td>353</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;.=&nbsp;$this-&gt;_yamlize($key,$value,$indent);
</td></tr>
<tr><td>354</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>355</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$string;
</td></tr>
<tr><td>356</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>357</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;
</td></tr>
<tr><td>358</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>359</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>360</td>
<td class="normal">
</td></tr>
<tr><td>361</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>362</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Returns&nbsp;YAML&nbsp;from&nbsp;a&nbsp;key&nbsp;and&nbsp;a&nbsp;value
</td></tr>
<tr><td>363</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>364</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>365</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$key&nbsp;The&nbsp;name&nbsp;of&nbsp;the&nbsp;key
</td></tr>
<tr><td>366</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$value&nbsp;The&nbsp;value&nbsp;of&nbsp;the&nbsp;item
</td></tr>
<tr><td>367</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$indent&nbsp;The&nbsp;indent&nbsp;of&nbsp;the&nbsp;current&nbsp;node
</td></tr>
<tr><td>368</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>369</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_dumpNode($key,$value,$indent)&nbsp;{
</td></tr>
<tr><td>370</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;some&nbsp;folding&nbsp;here,&nbsp;for&nbsp;blocks
</td></tr>
<tr><td>371</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strpos($value,&quot;\n&quot;)&nbsp;!==&nbsp;false&nbsp;||&nbsp;strpos($value,&quot;:&nbsp;&quot;)&nbsp;!==&nbsp;false&nbsp;||&nbsp;strpos($value,&quot;-&nbsp;&quot;)&nbsp;!==&nbsp;false)&nbsp;{
</td></tr>
<tr><td>372</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;$this-&gt;_doLiteralBlock($value,$indent);
</td></tr>
<tr><td>373</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>374</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;=&nbsp;$this-&gt;_doFolding($value,$indent);
</td></tr>
<tr><td>375</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>376</td>
<td class="normal">
</td></tr>
<tr><td>377</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool($value))&nbsp;{
</td></tr>
<tr><td>378</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;($value)&nbsp;?&nbsp;&quot;true&quot;&nbsp;:&nbsp;&quot;false&quot;;
</td></tr>
<tr><td>379</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>380</td>
<td class="normal">
</td></tr>
<tr><td>381</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spaces&nbsp;=&nbsp;str_repeat('&nbsp;',$indent);
</td></tr>
<tr><td>382</td>
<td class="normal">
</td></tr>
<tr><td>383</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_int($key))&nbsp;{
</td></tr>
<tr><td>384</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;a&nbsp;sequence
</td></tr>
<tr><td>385</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;$spaces.'-&nbsp;'.$value.&quot;\n&quot;;
</td></tr>
<tr><td>386</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>387</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;mapped
</td></tr>
<tr><td>388</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string&nbsp;=&nbsp;$spaces.$key.':&nbsp;'.$value.&quot;\n&quot;;
</td></tr>
<tr><td>389</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>390</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$string;
</td></tr>
<tr><td>391</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>392</td>
<td class="covered">
</td></tr>
<tr><td>393</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>394</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;a&nbsp;literal&nbsp;block&nbsp;for&nbsp;dumping
</td></tr>
<tr><td>395</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>396</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>397</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$value
</td></tr>
<tr><td>398</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$indent&nbsp;int&nbsp;The&nbsp;value&nbsp;of&nbsp;the&nbsp;indent
</td></tr>
<tr><td>399</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>400</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_doLiteralBlock($value,$indent)&nbsp;{
</td></tr>
<tr><td>401</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exploded&nbsp;=&nbsp;explode(&quot;\n&quot;,$value);
</td></tr>
<tr><td>402</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newValue&nbsp;=&nbsp;'|';
</td></tr>
<tr><td>403</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;&nbsp;+=&nbsp;$this-&gt;_dumpIndent;
</td></tr>
<tr><td>404</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$spaces&nbsp;&nbsp;&nbsp;=&nbsp;str_repeat('&nbsp;',$indent);
</td></tr>
<tr><td>405</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($exploded&nbsp;as&nbsp;$line)&nbsp;{
</td></tr>
<tr><td>406</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newValue&nbsp;.=&nbsp;&quot;\n&quot;&nbsp;.&nbsp;$spaces&nbsp;.&nbsp;trim($line);
</td></tr>
<tr><td>407</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>408</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$newValue;
</td></tr>
<tr><td>409</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>410</td>
<td class="orange">
</td></tr>
<tr><td>411</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>412</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Folds&nbsp;a&nbsp;string&nbsp;of&nbsp;text,&nbsp;if&nbsp;necessary
</td></tr>
<tr><td>413</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>414</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;string
</td></tr>
<tr><td>415</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;$value&nbsp;The&nbsp;string&nbsp;you&nbsp;wish&nbsp;to&nbsp;fold
</td></tr>
<tr><td>416</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>417</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_doFolding($value,$indent)&nbsp;{
</td></tr>
<tr><td>418</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Don't&nbsp;do&nbsp;anything&nbsp;if&nbsp;wordwrap&nbsp;is&nbsp;set&nbsp;to&nbsp;0
</td></tr>
<tr><td>419</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($this-&gt;_dumpWordWrap&nbsp;===&nbsp;0)&nbsp;{
</td></tr>
<tr><td>420</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$value;
</td></tr>
<tr><td>421</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>422</td>
<td class="normal">
</td></tr>
<tr><td>423</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strlen($value)&nbsp;&gt;&nbsp;$this-&gt;_dumpWordWrap)&nbsp;{
</td></tr>
<tr><td>424</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;+=&nbsp;$this-&gt;_dumpIndent;
</td></tr>
<tr><td>425</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;=&nbsp;str_repeat('&nbsp;',$indent);
</td></tr>
<tr><td>426</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$wrapped&nbsp;=&nbsp;wordwrap($value,$this-&gt;_dumpWordWrap,&quot;\n$indent&quot;);
</td></tr>
<tr><td>427</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;&nbsp;=&nbsp;&quot;&gt;\n&quot;.$indent.$wrapped;
</td></tr>
<tr><td>428</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>429</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$value;
</td></tr>
<tr><td>430</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>431</td>
<td class="covered">
</td></tr>
<tr><td>432</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;Methods&nbsp;used&nbsp;in&nbsp;loading&nbsp;*/
</td></tr>
<tr><td>433</td>
<td class="covered">
</td></tr>
<tr><td>434</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>435</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;and&nbsp;returns&nbsp;the&nbsp;indentation&nbsp;of&nbsp;a&nbsp;YAML&nbsp;line
</td></tr>
<tr><td>436</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>437</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;int
</td></tr>
<tr><td>438</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$line&nbsp;A&nbsp;line&nbsp;from&nbsp;the&nbsp;YAML&nbsp;file
</td></tr>
<tr><td>439</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>440</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_getIndent($line)&nbsp;{
</td></tr>
<tr><td>441</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preg_match('/^\s{1,}/',$line,$match);
</td></tr>
<tr><td>442</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($match[0]))&nbsp;{
</td></tr>
<tr><td>443</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;=&nbsp;substr_count($match[0],'&nbsp;');
</td></tr>
<tr><td>444</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>445</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent&nbsp;=&nbsp;0;
</td></tr>
<tr><td>446</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>447</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$indent;
</td></tr>
<tr><td>448</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>449</td>
<td class="normal">
</td></tr>
<tr><td>450</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>451</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parses&nbsp;YAML&nbsp;code&nbsp;and&nbsp;returns&nbsp;an&nbsp;array&nbsp;for&nbsp;a&nbsp;node
</td></tr>
<tr><td>452</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>453</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>454</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$line&nbsp;A&nbsp;line&nbsp;from&nbsp;the&nbsp;YAML&nbsp;file
</td></tr>
<tr><td>455</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>456</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_parseLine($line)&nbsp;{
</td></tr>
<tr><td>457</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line&nbsp;=&nbsp;trim($line);
</td></tr>
<tr><td>458</td>
<td class="red">
</td></tr>
<tr><td>459</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!preg_match(&quot;/\\\#/&quot;,&nbsp;$line))&nbsp;{&nbsp;
</td></tr>
<tr><td>460</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$line&nbsp;=&nbsp;trim(preg_replace('/#.*$/',&nbsp;'',&nbsp;$line));&nbsp;
</td></tr>
<tr><td>461</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>462</td>
<td class="red">
</td></tr>
<tr><td>463</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;array();
</td></tr>
<tr><td>464</td>
<td class="normal">
</td></tr>
<tr><td>465</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^-(.*):$/',$line))&nbsp;{
</td></tr>
<tr><td>466</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;a&nbsp;mapped&nbsp;sequence
</td></tr>
<tr><td>467</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;trim(substr(substr($line,1),0,-1));
</td></tr>
<tr><td>468</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key]&nbsp;=&nbsp;'';
</td></tr>
<tr><td>469</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;($line[0]&nbsp;==&nbsp;'-'&nbsp;&amp;&amp;&nbsp;substr($line,0,3)&nbsp;!=&nbsp;'---')&nbsp;{
</td></tr>
<tr><td>470</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;a&nbsp;list&nbsp;item&nbsp;but&nbsp;not&nbsp;a&nbsp;new&nbsp;stream
</td></tr>
<tr><td>471</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strlen($line)&nbsp;&gt;&nbsp;1)&nbsp;{
</td></tr>
<tr><td>472</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;&nbsp;=&nbsp;trim(substr($line,1));
</td></tr>
<tr><td>473</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value.&nbsp;&nbsp;Int,&nbsp;string,&nbsp;etc
</td></tr>
<tr><td>474</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;&nbsp;=&nbsp;$this-&gt;_toType($value);
</td></tr>
<tr><td>475</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[]&nbsp;=&nbsp;$value;
</td></tr>
<tr><td>476</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>477</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[]&nbsp;=&nbsp;array();
</td></tr>
<tr><td>478</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>479</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match('/^(.+):/',$line,$key))&nbsp;{
</td></tr>
<tr><td>480</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;a&nbsp;key/value&nbsp;pair&nbsp;most&nbsp;likely
</td></tr>
<tr><td>481</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;the&nbsp;key&nbsp;is&nbsp;in&nbsp;double&nbsp;quotes&nbsp;pull&nbsp;it&nbsp;out
</td></tr>
<tr><td>482</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^([&quot;\'](.*)[&quot;\'](\s)*:)/',$line,$matches))&nbsp;{
</td></tr>
<tr><td>483</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;trim(str_replace($matches[1],'',$line));
</td></tr>
<tr><td>484</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;=&nbsp;$matches[2];
</td></tr>
<tr><td>485</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>486</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Do&nbsp;some&nbsp;guesswork&nbsp;as&nbsp;to&nbsp;the&nbsp;key&nbsp;and&nbsp;the&nbsp;value
</td></tr>
<tr><td>487</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode&nbsp;=&nbsp;explode(':',$line);
</td></tr>
<tr><td>488</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;trim($explode[0]);
</td></tr>
<tr><td>489</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array_shift($explode);
</td></tr>
<tr><td>490</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;&nbsp;=&nbsp;trim(implode(':',$explode));
</td></tr>
<tr><td>491</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>492</td>
<td class="normal">
</td></tr>
<tr><td>493</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Set&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;value.&nbsp;&nbsp;Int,&nbsp;string,&nbsp;etc
</td></tr>
<tr><td>494</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;$this-&gt;_toType($value);
</td></tr>
<tr><td>495</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(empty($key))&nbsp;{
</td></tr>
<tr><td>496</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$value;
</td></tr>
<tr><td>497</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>498</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array[$key]&nbsp;=&nbsp;$value;
</td></tr>
<tr><td>499</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>500</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>501</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$array;
</td></tr>
<tr><td>502</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>503</td>
<td class="normal">
</td></tr>
<tr><td>504</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>505</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;passed&nbsp;value,&nbsp;returns&nbsp;the&nbsp;value&nbsp;as&nbsp;the&nbsp;new&nbsp;type.
</td></tr>
<tr><td>506</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>507</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;string&nbsp;$value
</td></tr>
<tr><td>508</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;mixed
</td></tr>
<tr><td>509</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>510</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_toType($value)&nbsp;{
</td></tr>
<tr><td>511</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^(&quot;(.*)&quot;|\'(.*)\')/',$value,$matches))&nbsp;{
</td></tr>
<tr><td>512</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;(string)preg_replace('/(\'\'|\\\\\')/',&quot;'&quot;,end($matches));
</td></tr>
<tr><td>513</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;preg_replace('/\\\\&quot;/','&quot;',$value);
</td></tr>
<tr><td>514</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match('/^\\[(.+)\\]$/',$value,$matches))&nbsp;{
</td></tr>
<tr><td>515</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Inline&nbsp;Sequence
</td></tr>
<tr><td>516</td>
<td class="normal">
</td></tr>
<tr><td>517</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Take&nbsp;out&nbsp;strings&nbsp;sequences&nbsp;and&nbsp;mappings
</td></tr>
<tr><td>518</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode&nbsp;=&nbsp;$this-&gt;_inlineEscape($matches[1]);
</td></tr>
<tr><td>519</td>
<td class="covered">
</td></tr>
<tr><td>520</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Propogate&nbsp;value&nbsp;array
</td></tr>
<tr><td>521</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;&nbsp;=&nbsp;array();
</td></tr>
<tr><td>522</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($explode&nbsp;as&nbsp;$v)&nbsp;{
</td></tr>
<tr><td>523</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value[]&nbsp;=&nbsp;$this-&gt;_toType($v);
</td></tr>
<tr><td>524</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>525</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(strpos($value,':&nbsp;')!==false&nbsp;&amp;&amp;&nbsp;!preg_match('/^{(.+)/',$value))&nbsp;{
</td></tr>
<tr><td>526</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It's&nbsp;a&nbsp;map
</td></tr>
<tr><td>527</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;explode(':&nbsp;',$value);
</td></tr>
<tr><td>528</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;=&nbsp;trim($array[0]);
</td></tr>
<tr><td>529</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array_shift($array);
</td></tr>
<tr><td>530</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;trim(implode(':&nbsp;',$array));
</td></tr>
<tr><td>531</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;$this-&gt;_toType($value);
</td></tr>
<tr><td>532</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;array($key&nbsp;=&gt;&nbsp;$value);
</td></tr>
<tr><td>533</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match(&quot;/{(.+)}$/&quot;,$value,$matches))&nbsp;{
</td></tr>
<tr><td>534</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Inline&nbsp;Mapping
</td></tr>
<tr><td>535</td>
<td class="normal">
</td></tr>
<tr><td>536</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Take&nbsp;out&nbsp;strings&nbsp;sequences&nbsp;and&nbsp;mappings
</td></tr>
<tr><td>537</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode&nbsp;=&nbsp;$this-&gt;_inlineEscape($matches[1]);
</td></tr>
<tr><td>538</td>
<td class="red">
</td></tr>
<tr><td>539</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Propogate&nbsp;value&nbsp;array
</td></tr>
<tr><td>540</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;array();
</td></tr>
<tr><td>541</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($explode&nbsp;as&nbsp;$v)&nbsp;{
</td></tr>
<tr><td>542</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$array&nbsp;=&nbsp;$array&nbsp;+&nbsp;$this-&gt;_toType($v);
</td></tr>
<tr><td>543</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>544</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;$array;
</td></tr>
<tr><td>545</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(strtolower($value)&nbsp;==&nbsp;'null'&nbsp;or&nbsp;$value&nbsp;==&nbsp;''&nbsp;or&nbsp;$value&nbsp;==&nbsp;'~')&nbsp;{
</td></tr>
<tr><td>546</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;NULL;
</td></tr>
<tr><td>547</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match&nbsp;('/^[0-9]+$/',&nbsp;$value))&nbsp;{
</td></tr>
<tr><td>548</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Cheeky&nbsp;change&nbsp;for&nbsp;compartibility&nbsp;with&nbsp;PHP&nbsp;&lt;&nbsp;4.2.0
</td></tr>
<tr><td>549</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;(int)$value;
</td></tr>
<tr><td>550</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(in_array(strtolower($value),
</td></tr>
<tr><td>551</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array('true',&nbsp;'on',&nbsp;'+',&nbsp;'yes',&nbsp;'y')))&nbsp;{
</td></tr>
<tr><td>552</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;true;
</td></tr>
<tr><td>553</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(in_array(strtolower($value),
</td></tr>
<tr><td>554</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array('false',&nbsp;'off',&nbsp;'-',&nbsp;'no',&nbsp;'n')))&nbsp;{
</td></tr>
<tr><td>555</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;false;
</td></tr>
<tr><td>556</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(is_numeric($value))&nbsp;{
</td></tr>
<tr><td>557</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;(float)$value;
</td></tr>
<tr><td>558</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>559</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Just&nbsp;a&nbsp;normal&nbsp;string,&nbsp;right?
</td></tr>
<tr><td>560</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;trim(preg_replace('/#(.+)$/','',$value));
</td></tr>
<tr><td>561</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>562</td>
<td class="normal">
</td></tr>
<tr><td>563</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$value;
</td></tr>
<tr><td>564</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>565</td>
<td class="covered">
</td></tr>
<tr><td>566</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>567</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Used&nbsp;in&nbsp;inlines&nbsp;to&nbsp;check&nbsp;for&nbsp;more&nbsp;inlines&nbsp;or&nbsp;quoted&nbsp;strings
</td></tr>
<tr><td>568</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>569</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>570</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>571</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_inlineEscape($inline)&nbsp;{
</td></tr>
<tr><td>572</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;There's&nbsp;gotta&nbsp;be&nbsp;a&nbsp;cleaner&nbsp;way&nbsp;to&nbsp;do&nbsp;this...
</td></tr>
<tr><td>573</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;While&nbsp;pure&nbsp;sequences&nbsp;seem&nbsp;to&nbsp;be&nbsp;nesting&nbsp;just&nbsp;fine,
</td></tr>
<tr><td>574</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;pure&nbsp;mappings&nbsp;and&nbsp;mappings&nbsp;with&nbsp;sequences&nbsp;inside&nbsp;can't&nbsp;go&nbsp;very
</td></tr>
<tr><td>575</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;deep.&nbsp;&nbsp;This&nbsp;needs&nbsp;to&nbsp;be&nbsp;fixed.
</td></tr>
<tr><td>576</td>
<td class="covered">
</td></tr>
<tr><td>577</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$saved_strings&nbsp;=&nbsp;array();
</td></tr>
<tr><td>578</td>
<td class="covered">
</td></tr>
<tr><td>579</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;strings
</td></tr>
<tr><td>580</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$regex&nbsp;=&nbsp;'/(?:(&quot;)|(?:\'))((?(1)[^&quot;]+|[^\']+))(?(1)&quot;|\')/';
</td></tr>
<tr><td>581</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match_all($regex,$inline,$strings))&nbsp;{
</td></tr>
<tr><td>582</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$saved_strings&nbsp;=&nbsp;$strings[0];
</td></tr>
<tr><td>583</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inline&nbsp;&nbsp;=&nbsp;preg_replace($regex,'YAMLString',$inline);
</td></tr>
<tr><td>584</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>585</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unset($regex);
</td></tr>
<tr><td>586</td>
<td class="red">
</td></tr>
<tr><td>587</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;sequences
</td></tr>
<tr><td>588</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match_all('/\[(.+)\]/U',$inline,$seqs))&nbsp;{
</td></tr>
<tr><td>589</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inline&nbsp;=&nbsp;preg_replace('/\[(.+)\]/U','YAMLSeq',$inline);
</td></tr>
<tr><td>590</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$seqs&nbsp;&nbsp;&nbsp;=&nbsp;$seqs[0];
</td></tr>
<tr><td>591</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>592</td>
<td class="normal">
</td></tr>
<tr><td>593</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;mappings
</td></tr>
<tr><td>594</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match_all('/{(.+)}/U',$inline,$maps))&nbsp;{
</td></tr>
<tr><td>595</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$inline&nbsp;=&nbsp;preg_replace('/{(.+)}/U','YAMLMap',$inline);
</td></tr>
<tr><td>596</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maps&nbsp;&nbsp;&nbsp;=&nbsp;$maps[0];
</td></tr>
<tr><td>597</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>598</td>
<td class="red">
</td></tr>
<tr><td>599</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode&nbsp;=&nbsp;explode(',&nbsp;',$inline);
</td></tr>
<tr><td>600</td>
<td class="covered">
</td></tr>
<tr><td>601</td>
<td class="covered">
</td></tr>
<tr><td>602</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Re-add&nbsp;the&nbsp;sequences
</td></tr>
<tr><td>603</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($seqs))&nbsp;{
</td></tr>
<tr><td>604</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i&nbsp;=&nbsp;0;
</td></tr>
<tr><td>605</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($explode&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
</td></tr>
<tr><td>606</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strpos($value,'YAMLSeq')&nbsp;!==&nbsp;false)&nbsp;{
</td></tr>
<tr><td>607</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode[$key]&nbsp;=&nbsp;str_replace('YAMLSeq',$seqs[$i],$value);
</td></tr>
<tr><td>608</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$i;
</td></tr>
<tr><td>609</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>610</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>611</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>612</td>
<td class="red">
</td></tr>
<tr><td>613</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Re-add&nbsp;the&nbsp;mappings
</td></tr>
<tr><td>614</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($maps))&nbsp;{
</td></tr>
<tr><td>615</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i&nbsp;=&nbsp;0;
</td></tr>
<tr><td>616</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($explode&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
</td></tr>
<tr><td>617</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strpos($value,'YAMLMap')&nbsp;!==&nbsp;false)&nbsp;{
</td></tr>
<tr><td>618</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode[$key]&nbsp;=&nbsp;str_replace('YAMLMap',$maps[$i],$value);
</td></tr>
<tr><td>619</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$i;
</td></tr>
<tr><td>620</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>621</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>622</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>623</td>
<td class="normal">
</td></tr>
<tr><td>624</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Re-add&nbsp;the&nbsp;strings
</td></tr>
<tr><td>625</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($saved_strings))&nbsp;{
</td></tr>
<tr><td>626</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i&nbsp;=&nbsp;0;
</td></tr>
<tr><td>627</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($explode&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$value)&nbsp;{
</td></tr>
<tr><td>628</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(strpos($value,'YAMLString')&nbsp;!==&nbsp;false)&nbsp;{
</td></tr>
<tr><td>629</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$explode[$key]&nbsp;=&nbsp;preg_replace('/YAMLString/',$saved_strings[$i],$value,&nbsp;1);
</td></tr>
<tr><td>630</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++$i;
</td></tr>
<tr><td>631</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$value&nbsp;=&nbsp;$explode[$key];
</td></tr>
<tr><td>632</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>633</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>634</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>635</td>
<td class="covered">
</td></tr>
<tr><td>636</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$explode;
</td></tr>
<tr><td>637</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>638</td>
<td class="red">
</td></tr>
<tr><td>639</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>640</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Builds&nbsp;the&nbsp;PHP&nbsp;array&nbsp;from&nbsp;all&nbsp;the&nbsp;YAML&nbsp;nodes&nbsp;we've&nbsp;gathered
</td></tr>
<tr><td>641</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>642</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>643</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>644</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_buildArray()&nbsp;{
</td></tr>
<tr><td>645</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$trunk&nbsp;=&nbsp;array();
</td></tr>
<tr><td>646</td>
<td class="normal">
</td></tr>
<tr><td>647</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;isset($this-&gt;_indentSort[0]))&nbsp;{
</td></tr>
<tr><td>648</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$trunk;
</td></tr>
<tr><td>649</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>650</td>
<td class="red">
</td></tr>
<tr><td>651</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($this-&gt;_indentSort[0]&nbsp;as&nbsp;$n)&nbsp;{
</td></tr>
<tr><td>652</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(empty($n-&gt;parent))&nbsp;{
</td></tr>
<tr><td>653</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_nodeArrayizeData($n);
</td></tr>
<tr><td>654</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;references&nbsp;and&nbsp;copy&nbsp;the&nbsp;needed&nbsp;data&nbsp;to&nbsp;complete&nbsp;them.
</td></tr>
<tr><td>655</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_makeReferences($n);
</td></tr>
<tr><td>656</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;our&nbsp;data&nbsp;with&nbsp;the&nbsp;big&nbsp;array&nbsp;we're&nbsp;building
</td></tr>
<tr><td>657</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$trunk&nbsp;=&nbsp;$this-&gt;_array_kmerge($trunk,$n-&gt;data);
</td></tr>
<tr><td>658</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>659</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>660</td>
<td class="covered">
</td></tr>
<tr><td>661</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$trunk;
</td></tr>
<tr><td>662</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>663</td>
<td class="red">
</td></tr>
<tr><td>664</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>665</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Traverses&nbsp;node-space&nbsp;and&nbsp;sets&nbsp;references&nbsp;(&amp;&nbsp;and&nbsp;*)&nbsp;accordingly
</td></tr>
<tr><td>666</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>667</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;bool
</td></tr>
<tr><td>668</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>669</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_linkReferences()&nbsp;{
</td></tr>
<tr><td>670</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($this-&gt;_haveRefs))&nbsp;{
</td></tr>
<tr><td>671</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($this-&gt;_haveRefs&nbsp;as&nbsp;$node)&nbsp;{
</td></tr>
<tr><td>672</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(&nbsp;!&nbsp;empty($node-&gt;data))&nbsp;{
</td></tr>
<tr><td>673</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;key($node-&gt;data);
</td></tr>
<tr><td>674</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;it's&nbsp;an&nbsp;array,&nbsp;don't&nbsp;check.
</td></tr>
<tr><td>675</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($node-&gt;data[$key]))&nbsp;{
</td></tr>
<tr><td>676</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($node-&gt;data[$key]&nbsp;as&nbsp;$k&nbsp;=&gt;&nbsp;$v)&nbsp;{
</td></tr>
<tr><td>677</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_linkRef($node,$key,$k,$v);
</td></tr>
<tr><td>678</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>679</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>680</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_linkRef($node,$key);
</td></tr>
<tr><td>681</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>682</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>683</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>684</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>685</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</td></tr>
<tr><td>686</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>687</td>
<td class="red">
</td></tr>
<tr><td>688</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_linkRef(&amp;$n,$key,$k&nbsp;=&nbsp;NULL,$v&nbsp;=&nbsp;NULL)&nbsp;{
</td></tr>
<tr><td>689</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(empty($k)&nbsp;&amp;&amp;&nbsp;empty($v))&nbsp;{
</td></tr>
<tr><td>690</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Look&nbsp;for&nbsp;&amp;refs
</td></tr>
<tr><td>691</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^&amp;([^&nbsp;]+)/',$n-&gt;data[$key],$matches))&nbsp;{
</td></tr>
<tr><td>692</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Flag&nbsp;the&nbsp;node&nbsp;so&nbsp;we&nbsp;know&nbsp;it's&nbsp;a&nbsp;reference
</td></tr>
<tr><td>693</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;ref&nbsp;=&nbsp;substr($matches[0],1);
</td></tr>
<tr><td>694</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;data[$key]&nbsp;=
</td></tr>
<tr><td>695</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substr($n-&gt;data[$key],strlen($matches[0])+1);
</td></tr>
<tr><td>696</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Look&nbsp;for&nbsp;*refs
</td></tr>
<tr><td>697</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match('/^\*([^&nbsp;]+)/',$n-&gt;data[$key],$matches))&nbsp;{
</td></tr>
<tr><td>698</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref&nbsp;=&nbsp;substr($matches[0],1);
</td></tr>
<tr><td>699</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Flag&nbsp;the&nbsp;node&nbsp;as&nbsp;having&nbsp;a&nbsp;reference
</td></tr>
<tr><td>700</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;refKey&nbsp;=&nbsp;&nbsp;$ref;
</td></tr>
<tr><td>701</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>702</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(&nbsp;!&nbsp;empty($k)&nbsp;&amp;&amp;&nbsp;!empty($v))&nbsp;{
</td></tr>
<tr><td>703</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(preg_match('/^&amp;([^&nbsp;]+)/',$v,$matches))&nbsp;{
</td></tr>
<tr><td>704</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Flag&nbsp;the&nbsp;node&nbsp;so&nbsp;we&nbsp;know&nbsp;it's&nbsp;a&nbsp;reference
</td></tr>
<tr><td>705</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;ref&nbsp;=&nbsp;substr($matches[0],1);
</td></tr>
<tr><td>706</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;data[$key][$k]&nbsp;=
</td></tr>
<tr><td>707</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;substr($v,strlen($matches[0])+1);
</td></tr>
<tr><td>708</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Look&nbsp;for&nbsp;*refs
</td></tr>
<tr><td>709</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(preg_match('/^\*([^&nbsp;]+)/',$v,$matches))&nbsp;{
</td></tr>
<tr><td>710</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref&nbsp;=&nbsp;substr($matches[0],1);
</td></tr>
<tr><td>711</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Flag&nbsp;the&nbsp;node&nbsp;as&nbsp;having&nbsp;a&nbsp;reference
</td></tr>
<tr><td>712</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_allNodes[$n-&gt;id]-&gt;refKey&nbsp;=&nbsp;&nbsp;$ref;
</td></tr>
<tr><td>713</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>714</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>715</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>716</td>
<td class="orange">
</td></tr>
<tr><td>717</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>718</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Finds&nbsp;the&nbsp;children&nbsp;of&nbsp;a&nbsp;node&nbsp;and&nbsp;aids&nbsp;in&nbsp;the&nbsp;building&nbsp;of&nbsp;the&nbsp;PHP&nbsp;array
</td></tr>
<tr><td>719</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>720</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;int&nbsp;$nid&nbsp;The&nbsp;id&nbsp;of&nbsp;the&nbsp;node&nbsp;whose&nbsp;children&nbsp;we're&nbsp;gathering
</td></tr>
<tr><td>721</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>722</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>723</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_gatherChildren($nid)&nbsp;{
</td></tr>
<tr><td>724</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$return&nbsp;=&nbsp;array();
</td></tr>
<tr><td>725</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node&nbsp;&nbsp;&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$nid];
</td></tr>
<tr><td>726</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array&nbsp;($this-&gt;_allParent[$node-&gt;id]))&nbsp;{
</td></tr>
<tr><td>727</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($this-&gt;_allParent[$node-&gt;id]&nbsp;as&nbsp;$nodeZ)&nbsp;{
</td></tr>
<tr><td>728</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$z&nbsp;=&amp;&nbsp;$this-&gt;_allNodes[$nodeZ];
</td></tr>
<tr><td>729</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We&nbsp;found&nbsp;a&nbsp;child
</td></tr>
<tr><td>730</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_nodeArrayizeData($z);
</td></tr>
<tr><td>731</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Check&nbsp;for&nbsp;references
</td></tr>
<tr><td>732</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_makeReferences($z);
</td></tr>
<tr><td>733</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Merge&nbsp;with&nbsp;the&nbsp;big&nbsp;array&nbsp;we're&nbsp;returning
</td></tr>
<tr><td>734</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;The&nbsp;big&nbsp;array&nbsp;being&nbsp;all&nbsp;the&nbsp;data&nbsp;of&nbsp;the&nbsp;children&nbsp;of&nbsp;our&nbsp;parent&nbsp;node
</td></tr>
<tr><td>735</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$return&nbsp;=&nbsp;$this-&gt;_array_kmerge($return,$z-&gt;data);
</td></tr>
<tr><td>736</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>737</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>738</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$return;
</td></tr>
<tr><td>739</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>740</td>
<td class="orange">
</td></tr>
<tr><td>741</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>742</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Turns&nbsp;a&nbsp;node's&nbsp;data&nbsp;and&nbsp;its&nbsp;children's&nbsp;data&nbsp;into&nbsp;a&nbsp;PHP&nbsp;array
</td></tr>
<tr><td>743</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>744</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>745</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$node&nbsp;The&nbsp;node&nbsp;which&nbsp;you&nbsp;want&nbsp;to&nbsp;arrayize
</td></tr>
<tr><td>746</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;boolean
</td></tr>
<tr><td>747</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>748</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_nodeArrayizeData(&amp;$node)&nbsp;{
</td></tr>
<tr><td>749</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($node-&gt;data)&nbsp;&amp;&amp;&nbsp;$node-&gt;children&nbsp;==&nbsp;true)&nbsp;{
</td></tr>
<tr><td>750</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;node&nbsp;has&nbsp;children,&nbsp;so&nbsp;we&nbsp;need&nbsp;to&nbsp;find&nbsp;them
</td></tr>
<tr><td>751</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$childs&nbsp;=&nbsp;$this-&gt;_gatherChildren($node-&gt;id);
</td></tr>
<tr><td>752</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We've&nbsp;gathered&nbsp;all&nbsp;our&nbsp;children's&nbsp;data&nbsp;and&nbsp;are&nbsp;ready&nbsp;to&nbsp;use&nbsp;it
</td></tr>
<tr><td>753</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;key($node-&gt;data);
</td></tr>
<tr><td>754</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;=&nbsp;empty($key)&nbsp;?&nbsp;0&nbsp;:&nbsp;$key;
</td></tr>
<tr><td>755</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;If&nbsp;it's&nbsp;an&nbsp;array,&nbsp;add&nbsp;to&nbsp;it&nbsp;of&nbsp;course
</td></tr>
<tr><td>756</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset&nbsp;($node-&gt;data[$key]))&nbsp;{
</td></tr>
<tr><td>757</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_array($node-&gt;data[$key]))&nbsp;{
</td></tr>
<tr><td>758</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data[$key]&nbsp;=&nbsp;$this-&gt;_array_kmerge($node-&gt;data[$key],$childs);
</td></tr>
<tr><td>759</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>760</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data[$key]&nbsp;=&nbsp;$childs;
</td></tr>
<tr><td>761</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>762</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{
</td></tr>
<tr><td>763</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data[$key]&nbsp;=&nbsp;$childs;
</td></tr>
<tr><td>764</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>765</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(&nbsp;!&nbsp;is_array($node-&gt;data)&nbsp;&amp;&amp;&nbsp;$node-&gt;children&nbsp;==&nbsp;true)&nbsp;{
</td></tr>
<tr><td>766</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Same&nbsp;as&nbsp;above,&nbsp;find&nbsp;the&nbsp;children&nbsp;of&nbsp;this&nbsp;node
</td></tr>
<tr><td>767</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$childs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;$this-&gt;_gatherChildren($node-&gt;id);
</td></tr>
<tr><td>768</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data&nbsp;&nbsp;&nbsp;=&nbsp;array();
</td></tr>
<tr><td>769</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;data[]&nbsp;=&nbsp;$childs;
</td></tr>
<tr><td>770</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>771</td>
<td class="normal">
</td></tr>
<tr><td>772</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;We&nbsp;edited&nbsp;$node&nbsp;by&nbsp;reference,&nbsp;so&nbsp;just&nbsp;return&nbsp;true
</td></tr>
<tr><td>773</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</td></tr>
<tr><td>774</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>775</td>
<td class="normal">
</td></tr>
<tr><td>776</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>777</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Traverses&nbsp;node-space&nbsp;and&nbsp;copies&nbsp;references&nbsp;to&nbsp;/&nbsp;from&nbsp;this&nbsp;object.
</td></tr>
<tr><td>778</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>779</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;object&nbsp;$z&nbsp;A&nbsp;node&nbsp;whose&nbsp;references&nbsp;we&nbsp;wish&nbsp;to&nbsp;make&nbsp;real
</td></tr>
<tr><td>780</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;bool
</td></tr>
<tr><td>781</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>782</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_makeReferences(&amp;$z)&nbsp;{
</td></tr>
<tr><td>783</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It&nbsp;is&nbsp;a&nbsp;reference
</td></tr>
<tr><td>784</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($z-&gt;ref))&nbsp;{
</td></tr>
<tr><td>785</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;key($z-&gt;data);
</td></tr>
<tr><td>786</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Copy&nbsp;the&nbsp;data&nbsp;to&nbsp;this&nbsp;object&nbsp;for&nbsp;easy&nbsp;retrieval&nbsp;later
</td></tr>
<tr><td>787</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;ref[$z-&gt;ref]&nbsp;=&amp;&nbsp;$z-&gt;data[$key];
</td></tr>
<tr><td>788</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;It&nbsp;has&nbsp;a&nbsp;reference
</td></tr>
<tr><td>789</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;elseif&nbsp;(isset($z-&gt;refKey))&nbsp;{
</td></tr>
<tr><td>790</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($this-&gt;ref[$z-&gt;refKey]))&nbsp;{
</td></tr>
<tr><td>791</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;key($z-&gt;data);
</td></tr>
<tr><td>792</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Copy&nbsp;the&nbsp;data&nbsp;from&nbsp;this&nbsp;object&nbsp;to&nbsp;make&nbsp;the&nbsp;node&nbsp;a&nbsp;real&nbsp;reference
</td></tr>
<tr><td>793</td>
<td class="orange">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$z-&gt;data[$key]&nbsp;=&amp;&nbsp;$this-&gt;ref[$z-&gt;refKey];
</td></tr>
<tr><td>794</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>795</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>796</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;
</td></tr>
<tr><td>797</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>798</td>
<td class="normal">
</td></tr>
<tr><td>799</td>
<td class="normal">
</td></tr>
<tr><td>800</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;/**
</td></tr>
<tr><td>801</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Merges&nbsp;arrays&nbsp;and&nbsp;maintains&nbsp;numeric&nbsp;keys.
</td></tr>
<tr><td>802</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>803</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;ever-so-slightly&nbsp;modified&nbsp;version&nbsp;of&nbsp;the&nbsp;array_kmerge()&nbsp;function&nbsp;posted
</td></tr>
<tr><td>804</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;to&nbsp;php.net&nbsp;by&nbsp;mail&nbsp;at&nbsp;nospam&nbsp;dot&nbsp;iaindooley&nbsp;dot&nbsp;com&nbsp;on&nbsp;2004-04-08.
</td></tr>
<tr><td>805</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>806</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;http://us3.php.net/manual/en/function.array-merge.php#41394
</td></tr>
<tr><td>807</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*
</td></tr>
<tr><td>808</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@access&nbsp;private
</td></tr>
<tr><td>809</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arr1
</td></tr>
<tr><td>810</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$arr2
</td></tr>
<tr><td>811</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;array
</td></tr>
<tr><td>812</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
</td></tr>
<tr><td>813</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;_array_kmerge($arr1,$arr2)&nbsp;{
</td></tr>
<tr><td>814</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;!&nbsp;is_array($arr1))&nbsp;$arr1&nbsp;=&nbsp;array();
</td></tr>
<tr><td>815</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;!&nbsp;is_array($arr2))&nbsp;$arr2&nbsp;=&nbsp;array();
</td></tr>
<tr><td>816</td>
<td class="covered">
</td></tr>
<tr><td>817</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$keys&nbsp;&nbsp;=&nbsp;array_merge(array_keys($arr1),array_keys($arr2));
</td></tr>
<tr><td>818</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$vals&nbsp;&nbsp;=&nbsp;array_merge(array_values($arr1),array_values($arr2));
</td></tr>
<tr><td>819</td>
<td class="covered">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ret&nbsp;&nbsp;&nbsp;=&nbsp;array();
</td></tr>
<tr><td>820</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach($keys&nbsp;as&nbsp;$key)&nbsp;{
</td></tr>
<tr><td>821</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list($unused,$val)&nbsp;=&nbsp;each($vals);
</td></tr>
<tr><td>822</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isset($ret[$key])&nbsp;and&nbsp;is_int($key))&nbsp;$ret[]&nbsp;=&nbsp;$val;&nbsp;else&nbsp;$ret[$key]&nbsp;=&nbsp;$val;
</td></tr>
<tr><td>823</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>824</td>
<td class="red">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$ret;
</td></tr>
<tr><td>825</td>
<td class="normal">&nbsp;&nbsp;&nbsp;&nbsp;}
</td></tr>
<tr><td>826</td>
<td class="normal">&nbsp;&nbsp;}
</td></tr>
<tr><td>827</td>
<td class="covered">?&gt;
</td></tr>
</table></body></html>
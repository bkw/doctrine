Doctrine Dataはフィクスチャデータ(訳注:フィクスチャは備品・備え付け・付属品のものの意味)のロードとダンプをするためにDoctrine ParserをするのでPaserで利用できるフォーマットを使うことができます。現在ymlはフルサポートされているフォーマットですがxmlと他のフォーマットは次です。

++ エクスポートする

データを多くの異なるフォーマットでフィクスチャファイルにエクスポートできます

<code type="php">
// データをエクスポートする場所を指定するためにいくつかの方法がある

// 一つの大きなフィクスチャファイルにダンプする
$data = new Doctrine_Data();
$data->exportData('data.yml', 'yml');

// 個別のファイルにダンプする。モデルごとに一つのファイル。3番目の引数のtrueは個別のファイルにダンプをすることを指示する
$data = new Doctrine_Data();
$data->exportData('path/to/directory', 'yml', true);
</code>

++ インポートする

多くの異なるフォーマットでフィクスチャファイルからデータをインポートできます

<code type="php">
// 少数の異なるフォーマットにパスを指定する
$path = 'path/to/data.yml'; // 一つのymlファイルへの直接のパス
$path = array('data.yml', 'data2.yml', 'more.yml'); // ymlファイルパスの配列
$path = array('directory1', 'directory2', 'directory3'); // ymlファイルを含むディレクトリの配列。.ymlの拡張しを持つファイルをすべて見つける

// インポートしているデータのフォーマットを指定する
$format = 'yml';
$format = 'xml';
$format = 'csv';

$models = array('User', 'Phonenumber'); // データをインポートしたいモデルの配列をオプションで指定できます。デフォルトですべての利用できるロードされたモデルと存在するデータに対してデータをロードします

$data = new Doctrine_Data();
$data->importData($path, $format, $models);
</code>

++ 書く

手動でフィクスチャファイルを書きアプリケーションでそれらをロードできます。下記はサンプルのdata.ymlフィクスチャファイルです。データフィクスチャファイルを複数のファイルに分割することもできます。Doctrineはすべてのフィクスチャファイルを読み込み解析し、すべてのデータをロードします。

これらの例のフィクスチャに対するサンプルのモデル/スキーマに関しては[doc schema-files :index :name]をご覧いただくようお願いします。

<code type="yml">
---
Adult:
  Adult_1:
    name: Parent 1
    Contact: Contact_1
Car:
  Car_1:
    name: Chevorlet Trailblazer
  Car_2:
    name: Chevorlet Blazer
  Car_3:
    name: Buick
Child:
  Child_1:
    name: Child 1
    Adult: Adult_1
Contact:
  Contact_1:
    name: Jonathan H. Wage
  Contact_3:
    name: Daniel Adams
  Contact_4:
    name: Robert Adams
Dog:
  Dog_1:
    name: Sam
    User: User_1
  Dog_2:
    name: Dixie
    User: User_2
  Dog_3:
    name: Chief
    User: User_3
SelfReference:
  SelfReference_1:
    User1: User_1
    User2: User_2
    name: Self Reference 1
    SelfReference1: SelfReference_2
    SelfReference2: SelfReference_3
  SelfReference_2:
    User1: User_2
    User2: User_1
    name: Self Reference 2
    SelfReference1: SelfReference_1
    SelfReference2: SelfReference_1
  SelfReference_3:
    User1: User_2
    User2: User_1
    name: Self Reference 3
    SelfReference1: SelfReference_3
    SelfReference2: SelfReference_3
User:
  User_1:
    username: jwage
    hair_color: light brown
    Contact: Contact_1
  User_2:
    username: dadams
    hair_color: dark brown
    Contact: Contact_3
  User_3:
    username: radams
    hair_color: light brown
    Contact: Contact_4
UserCar:
  UserCar_1:
    User: User_1
    Car: Car_1
  UserCar_2:
    User: User_2
    Car: Car_2
  UserCar_3:
    User: User_3
    Car: Car_3
</code>

data.ymlファイルからデータをロードするコードを書く方法です

<code type="php">
$data = new Doctrine_Data();
$data->importData('data.yml', 'yml');
</code>
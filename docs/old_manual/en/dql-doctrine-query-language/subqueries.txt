+++ Introduction

Doctrine allows you to use sub-dql queries in the FROM, SELECT and WHERE statements. Below you will find examples 
for all the different types of subqueries Doctrine supports.

+++ Comparisons using subqueries

Find all the users which are not in a specific group.

<code type="php">
$users = Doctrine_Query::create()
          ->from('User u')
          ->where('u.id NOT IN (SELECT u.id FROM User u INNER JOIN u.Group g WHERE g.id = ?)')
          ->execute(1);
</code>

+++ Conditional expressions
++++ ANY, IN and SOME
++++ ALL
++++ EXISTS and NOT EXISTS
+++ Correlated subqueries
+++ Subqueries in FROM clause
+++ Subqueries in SELECT clause

Retrieve the users phonenumber in a subquery and include it in the resultset of user information.

<code type="php">
$users = Doctrine_Query::create()
          ->select('u.*, (SELECT p.phonenumber FROM Phonenumber p WHERE p.user_id = u.id LIMIT 1) as phonenumber')
          ->from('User u')
          ->execute();
</code>